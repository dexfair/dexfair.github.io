{"version":3,"sources":["firebase.ts","components/ModalSndTx.tsx","store/modules/dexfair.ts","components/FormToken.tsx","components/Transfer.tsx","components/FormTokenPair.tsx","components/Exchange.tsx","components/DexfairExchange.tsx","components/DexfairLiquidityStatus.tsx","components/DexfairLiquidityMint.tsx","components/DexfairLiquidityBurn.tsx","components/DexfairLiquidity.tsx","components/Board.tsx","components/ModalSettings.tsx","components/ModalAddToken.tsx","App.tsx","reportWebVitals.ts","store/modules/index.ts","index.tsx","store/configureStore.ts"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","ModalSndTx","props","React","useState","message","setMessage","status","setStatus","header","setHeader","txHash","setTxHash","qrString","setQrString","camera","setCamera","scanDone","setScanDone","docRef","setDocRef","celo","show","txData","updataMainBalance","onHide","onScanSuccess","text","data","JSON","parse","key","kit","web3","utils","sha3","method","from","nonce","index0","index1","indexA","Buffer","replace","toString","replaceAll","indexB","collection","doc","get","then","a","exists","console","log","docData","value","metaTx","AES","decrypt","CryptoJS","enc","Utf8","sig","contract","eth","Contract","abi","sender","getAccounts","accounts","sendTransaction","to","methods","otc","parms","encodeABI","tx","getHash","hash","stringify","encrypt","update","waitReceipt","celoTx","catch","err","onScanError","e","address","getTransactionReceipt","receipt","transactionHash","callback","onClose","onSnapshot","unsub","useEffect","signer","keccak256","sign","parseInt","Math","random","name","set","deadline","docSnapshot","infoTx","Error","init","className","aria-labelledby","backdrop","centered","Header","closeButton","Title","id","title","Body","hidden","style","height","width","facingMode","onError","onScan","Footer","variant","onClick","window","open","getNetwork","blockscout","disabled","NETWORK","CONNECT","ACCOUNT","DEXFAIR","SETTING","INSERT","REMOVE","UPDATE","actionCreators","networkUpdate","network","type","meta","networkConnect","connection","accountUpdate","dexfairUpdate","dexfair","payload","dexfairSetting","tokenInsert","token","tokenUpdate","balance","tokenRemove","initialState","Celo","NETWORKS","Mainnet","isConnected","account","settings","slippage","desc","unit","tokens","list","Alfajores","Baklava","connect","dexfairStore","dispatch","StoreActions","bindActionCreators","storeActions","approved","setApproved","tokenList","label","enabled","amount","success","error","getAllowance","setApprove","updateAmount","changeToken","updateApproved","result","toBN","gt","Form","Group","Text","InputGroup","Prepend","Image","icon","src","Button","Control","placeholder","readOnly","onChange","target","DropdownButton","length","symbol","as","Append","onSelect","temp","map","element","index","Dropdown","Item","eventKey","setToken","setTo","setAmount","error0","setError0","success1","setSuccess1","error1","setError1","disable","setDisable","estimateFee","openTxModal","delayedQuery","useCallback","debounce","isAddress","toWei","estimateGas","gas","total","add","getBalance","lt","contracts","erc20","transfer","isInvalid","isValid","Feedback","_token","_amount","block","slot0","slot1","enable","setTokenList","token0","setToken0","token1","setToken1","amount0","setAmount0","amount1","setAmount1","success0","setSuccess0","exchange","setExchange","getExchange","tokenSell","sellAmount","tokenBuy","sell","sellGold","getBuyTokenAmount","call","buyAmount","buy","mul","div","fromWei","slot","otcEnable","setOtcEnable","adr","pair","setPair","updatePair","tokenA","tokenB","getPair","pairStatus","getDeadline","floor","Date","getTime","options","getChainId","chainId","otcSigner","otcSender","_method","arguments","CSSTransition","in","timeout","classNames","unmountOnExit","Row","Col","onExchange","register","Check","checked","createPair","reserves","amount2","setAmount2","text0","setText0","text1","setText1","setSuccess","setError","updateBalance","getAmount1","undefined","reserve0","reserve1","a1","calcLp","_amount0","_amount1","eq","ONE","TWO","z","sqrt","sub","isNeg","a0","lte","mintAmounts","liquidityAdd","burnAmount","liquidityRemove","burn","temp0","temp1","setKey","totalSupply","balanceOf","decodeParameter","Tab","Container","defaultActiveKey","sm","Nav","Link","k","Content","Pane","DexfairLiquidityMint","DexfairLiquidityBurn","gasPrice","setGasPrice","modalShow","setModalShow","setTxData","addrContract","addrToken","allowance","MAX","hexToNumberString","approve","round","defaultGasInflationFactor","getGasPrice","price","Card","Tabs","activeKey","setSlippage","setDeadline","Modal","ModalAddToken","setAddress","busy","setBusy","insertToken","CONNECTS","usb","ble","metamask","initDone","setInitDone","tokenJson","setTokenJson","support","setSupport","walletIcon","setWalletIcon","cusd","setBalance","showSettings","setShowSettings","showAddToken","setShowAddToken","login","wallet","connectMetaMask","connectLedgerUSB","connectLedgerBLE","disconnect","changeNetwork","selectedNetwork","updateTokenList","cfg","getGoldToken","gold","getStableToken","stable","xgp","forEach","getTotalBalance","CELO","cUSD","getSupport","fetch","respons","json","config","Navbar","bg","expand","Brand","href","fluid","Toggle","aria-controls","Collapse","items","Object","keys","select","NavDropdown","connects","Divider","DrawNetwork","size","sizes","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","combineReducers","state","action","filter","store","createStore","modules","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2b07def1.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nconst firebaseConfig = {\n\tapiKey: 'AIzaSyBvieQNVgY4SUOOwmLT7sTKhwdXz5qwag0',\n\tauthDomain: 'dexfair.firebaseapp.com',\n\tprojectId: 'dexfair',\n\tstorageBucket: 'dexfair.appspot.com',\n\tmessagingSenderId: '922079223142',\n\tappId: '1:922079223142:web:f1d05767d01c369cbebca7',\n\tmeasurementId: 'G-KGPWY9W7YF',\n};\n\n// firebaseConfig 정보로 firebase 시작\nfirebase.initializeApp(firebaseConfig);\n\n// firebase의 firestore 인스턴스를 변수에 저장\nconst firestore = firebase.firestore();\n\nexport default firestore;\n","import React from 'react';\nimport { Button, Modal, Row } from 'react-bootstrap';\nimport { Celo } from '@dexfair/celo-web-signer';\n// import { TransactionResult } from '@celo/connect';\nimport QRCode from 'qrcode.react';\nimport QrReader from 'react-qr-scanner';\nimport CryptoJS, { AES } from 'crypto-js';\nimport { TxData, MetaTx } from './Types';\nimport firestore from '../firebase';\n\ninterface Props {\n\tcelo: Celo;\n\tshow: boolean;\n\ttxData: TxData;\n\tupdataMainBalance: (address: string) => Promise<void>;\n\tonHide: () => void;\n}\n\nconst ModalSndTx: React.FunctionComponent<Props> = (props) => {\n\tconst [message, setMessage] = React.useState<string>('');\n\tconst [status, setStatus] = React.useState<number>(0); // 0: busy, 1: success, 2: error\n\tconst [header, setHeader] = React.useState<string>('');\n\tconst [txHash, setTxHash] = React.useState<string>('');\n\tconst [qrString, setQrString] = React.useState<string>('');\n\tconst [camera, setCamera] = React.useState<boolean>(false);\n\tconst [scanDone, setScanDone] = React.useState<boolean>(false);\n\tconst [docRef, setDocRef] = React.useState<any>(null);\n\n\tconst { celo, show, txData, updataMainBalance, onHide } = props;\n\n\tReact.useEffect(() => {\n\t\tasync function init() {\n\t\t\ttry {\n\t\t\t\tsetQrString('');\n\t\t\t\t// console.log(txData);\n\t\t\t\tif (txData.celoTx) {\n\t\t\t\t\tsetMessage('send transaction...');\n\t\t\t\t\tconst tx = await celo.kit.sendTransaction(txData.celoTx);\n\t\t\t\t\tawait waitReceipt(txData.celoTx.from, { celoTx: tx });\n\t\t\t\t} else if (txData.metaTx) {\n\t\t\t\t\tconst contract = new celo.kit.web3.eth.Contract([txData.metaTx.abi.signer]);\n\t\t\t\t\tconst otc = celo.kit.web3.utils.keccak256(contract.methods.otc(...txData.metaTx.parms).encodeABI());\n\t\t\t\t\tconst metaTx: MetaTx = { ...txData.metaTx, sig: await celo.sign(otc || '', txData.metaTx.from) };\n\n\t\t\t\t\tconst nonce = parseInt((Math.random() * 100000000).toString(), 10);\n\t\t\t\t\tconst key = celo.kit.web3.utils.sha3(`metatx:key:${metaTx.abi.signer.name}:${metaTx.from}:${nonce}`);\n\t\t\t\t\tconst index0 = celo.kit.web3.utils.sha3(`metatx:address:${metaTx.from}`);\n\t\t\t\t\tconst index1 = celo.kit.web3.utils.sha3(`metatx:index:${metaTx.abi.signer.name}:${metaTx.from}:${nonce}`);\n\t\t\t\t\tif (otc && key && index0 && index1) {\n\t\t\t\t\t\tconst indexA = `metatx/otc/${Buffer.from(index0.replace('0x', ''), 'hex')\n\t\t\t\t\t\t\t.toString('base64')\n\t\t\t\t\t\t\t.replaceAll('/', '@')}`;\n\t\t\t\t\t\tconst indexB = `${Buffer.from(index1.replace('0x', ''), 'hex').toString('base64').replaceAll('/', '@')}`;\n\t\t\t\t\t\tfirestore\n\t\t\t\t\t\t\t.collection(indexA)\n\t\t\t\t\t\t\t.doc(indexB)\n\t\t\t\t\t\t\t.set({\n\t\t\t\t\t\t\t\tvalue: AES.encrypt(JSON.stringify(metaTx), key).toString(),\n\t\t\t\t\t\t\t\thash: '',\n\t\t\t\t\t\t\t\tdeadline: txData.metaTx.parms[3],\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tsetQrString(JSON.stringify({ method: metaTx.abi.signer.name, from: metaTx.from, nonce }));\n\t\t\t\t\t\t\t\tconst doc = firestore.collection(indexA).doc(indexB);\n\t\t\t\t\t\t\t\tsetDocRef(doc);\n\t\t\t\t\t\t\t\tdoc.onSnapshot(\n\t\t\t\t\t\t\t\t\tasync (docSnapshot) => {\n\t\t\t\t\t\t\t\t\t\tif (!docSnapshot.exists) {\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('No such document!');\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\t\t\t// console.log(`Received doc snapshot: ${JSON.stringify(docSnapshot.data())}`);\n\t\t\t\t\t\t\t\t\t\t\tconst docData: any = docSnapshot.data();\n\t\t\t\t\t\t\t\t\t\t\tif (docData && docData.hash) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst infoTx = JSON.parse(AES.decrypt(docData.hash, key).toString(CryptoJS.enc.Utf8));\n\t\t\t\t\t\t\t\t\t\t\t\twaitReceipt(metaTx.from, { hash: infoTx.hash });\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\t\t\t\t\t\tdoc.onSnapshot(() => {})();\n\t\t\t\t\t\t\t\t\t\tsetDocRef(null);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t(err) => {\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\t\tconsole.log(`Encountered error: ${err}`);\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\t\t\t\t\t\t\t\tdoc.onSnapshot(() => {})();\n\t\t\t\t\t\t\t\t\t\tsetDocRef(null);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsetCamera(true);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(new Error(JSON.stringify(e)));\n\t\t\t\tsetStatus(2);\n\t\t\t\tsetHeader('alert alert-danger');\n\t\t\t\tsetMessage(e.message ? e.message : e.toString());\n\t\t\t\tsetTxHash('');\n\t\t\t}\n\t\t}\n\t\tif (show) {\n\t\t\tsetStatus(0);\n\t\t\tsetHeader('');\n\t\t\tsetMessage('');\n\t\t\tsetTxHash('');\n\t\t\tsetCamera(false);\n\t\t\tsetScanDone(false);\n\t\t\tinit();\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [celo.kit, show, txData]);\n\n\tfunction onScanSuccess(text: string) {\n\t\tif (text && !scanDone) {\n\t\t\tsetScanDone(true);\n\t\t\tconst data = JSON.parse(text);\n\t\t\t// eslint-disable-next-line no-console\n\t\t\t// console.log(data, text);\n\t\t\tconst key = celo.kit.web3.utils.sha3(`metatx:key:${data.method}:${data.from}:${data.nonce}`);\n\t\t\tconst index0 = celo.kit.web3.utils.sha3(`metatx:address:${data.from}`);\n\t\t\tconst index1 = celo.kit.web3.utils.sha3(`metatx:index:${data.method}:${data.from}:${data.nonce}`);\n\n\t\t\tif (key && index0 && index1) {\n\t\t\t\tconst indexA = `metatx/otc/${Buffer.from(index0.replace('0x', ''), 'hex')\n\t\t\t\t\t.toString('base64')\n\t\t\t\t\t.replaceAll('/', '@')}`;\n\t\t\t\tconst indexB = `${Buffer.from(index1.replace('0x', ''), 'hex').toString('base64').replaceAll('/', '@')}`;\n\t\t\t\tfirestore\n\t\t\t\t\t.collection(indexA)\n\t\t\t\t\t.doc(indexB)\n\t\t\t\t\t.get()\n\t\t\t\t\t.then(async (doc) => {\n\t\t\t\t\t\tif (!doc.exists) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.log('No such document!');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst docData: any = doc.data();\n\t\t\t\t\t\t\tif (docData && docData.value) {\n\t\t\t\t\t\t\t\tconst metaTx = JSON.parse(AES.decrypt(docData.value, key).toString(CryptoJS.enc.Utf8));\n\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\tconst tempContract = new celo.kit.web3.eth.Contract([metaTx.abi.signer]);\n\t\t\t\t\t\t\t\tconst tempAddress = await celo.recover(\n\t\t\t\t\t\t\t\t\tcelo.kit.web3.utils.keccak256(tempContract.methods.otc(...metaTx.parms).encodeABI()),\n\t\t\t\t\t\t\t\t\tmetaTx.sig\n\t\t\t\t\t\t\t\t);\n                console.log(metaTx, tempAddress);\n                */\n\t\t\t\t\t\t\t\tif (metaTx.sig) {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tconst contract = new celo.kit.web3.eth.Contract([metaTx.abi.sender]);\n\t\t\t\t\t\t\t\t\t\tconst accounts: string[] = await celo.getAccounts();\n\t\t\t\t\t\t\t\t\t\tconst tx = await celo.kit.sendTransaction({\n\t\t\t\t\t\t\t\t\t\t\tfrom: accounts[0],\n\t\t\t\t\t\t\t\t\t\t\tto: metaTx.to,\n\t\t\t\t\t\t\t\t\t\t\tdata: contract.methods.otc(...metaTx.parms, metaTx.from, metaTx.sig).encodeABI(),\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tfirestore\n\t\t\t\t\t\t\t\t\t\t\t.collection(indexA)\n\t\t\t\t\t\t\t\t\t\t\t.doc(indexB)\n\t\t\t\t\t\t\t\t\t\t\t.update({\n\t\t\t\t\t\t\t\t\t\t\t\thash: AES.encrypt(\n\t\t\t\t\t\t\t\t\t\t\t\t\tJSON.stringify({ sender: accounts[0], hash: await tx.getHash() }),\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t\t\t\t\t).toString(),\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tawait waitReceipt(accounts[0], { celoTx: tx });\n\t\t\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\t\tconsole.log('Error getting document', err);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log('Error getting document', err);\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onScanError(e: any) {\n\t\tsetCamera(false);\n\t\tsetStatus(2);\n\t\tsetHeader('alert alert-danger');\n\t\tsetMessage(e.message ? e.message : e.toString());\n\t\tsetTxHash('');\n\t}\n\n\tasync function waitReceipt(\n\t\taddress: string | number | undefined,\n\t\ttx: { celoTx?: any /* TransactionResult */; hash?: any }\n\t) {\n\t\tsetCamera(false);\n\t\tsetQrString('');\n\t\tsetMessage('send transaction...');\n\t\tconst receipt = tx.celoTx ? await tx.celoTx.waitReceipt() : await celo.kit.web3.eth.getTransactionReceipt(tx.hash);\n\t\t// console.log(receipt);\n\t\tsetStatus(1);\n\t\tsetHeader('alert alert-success');\n\t\tsetMessage('send transaction...success');\n\t\tsetTxHash(receipt.transactionHash);\n\t\tif (address) {\n\t\t\tawait updataMainBalance(address.toString());\n\t\t}\n\t\tif (txData.callback) {\n\t\t\ttxData.callback();\n\t\t}\n\t\t// TODO: redux getBalance, setBalance\n\t}\n\n\tfunction onClose() {\n\t\tif (docRef) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\t\t\tconst unsub = docRef.onSnapshot(() => {});\n\t\t\tunsub();\n\t\t\tsetDocRef(null);\n\t\t}\n\t\tonHide();\n\t}\n\n\tfunction WebCam() {\n\t\treturn (\n\t\t\t<QrReader\n\t\t\t\tstyle={{\n\t\t\t\t\theight: 320,\n\t\t\t\t\twidth: 320,\n\t\t\t\t}}\n\t\t\t\tfacingMode=\"rear\"\n\t\t\t\tonError={onScanError}\n\t\t\t\tonScan={onScanSuccess}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"ModalSndTx\">\n\t\t\t<Modal show={show} onHide={onClose} aria-labelledby=\"contained-modal-title-vcenter\" backdrop=\"static\" centered>\n\t\t\t\t<Modal.Header closeButton className={header}>\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">{txData.title}</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<p hidden={!!qrString}>{message}</p>\n\t\t\t\t\t<Row hidden={!qrString || camera} className=\"justify-content-center\">\n\t\t\t\t\t\t<QRCode value={qrString} />\n\t\t\t\t\t</Row>\n\t\t\t\t\t<Row hidden={!camera} className=\"justify-content-center\">\n\t\t\t\t\t\t{camera ? WebCam() : null}\n\t\t\t\t\t</Row>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button\n\t\t\t\t\t\thidden={status !== 1}\n\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\twindow.open(`${celo.getNetwork().blockscout}/tx/${txHash}`);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tBlockscout\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={onClose} disabled={status === 0}>\n\t\t\t\t\t\tClose\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n};\n\nexport default ModalSndTx;\n","import { AbiItem } from 'web3-utils';\nimport { Celo, NETWORKS } from '@dexfair/celo-web-signer';\n\nexport interface Token {\n\ticon: string;\n\tsymbol: string;\n\taddress: string;\n\tname?: string;\n}\n\nexport interface TokenStore {\n\t[network: string]: {\n\t\tlist: Token[];\n\t\tbalance: { [address: string]: string | null | undefined };\n\t};\n}\n\nexport interface Dexfair {\n\taddress: { [network: string]: string | null | undefined };\n\tabi: AbiItem[];\n}\n\nexport interface Settings {\n\t[key: string]: {\n\t\tname: string;\n\t\tdesc: string;\n\t\tunit: string;\n\t\tvalue: string;\n\t};\n}\n\nexport interface DexfairStore {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tcontract: Dexfair;\n\tsettings: Settings;\n\ttokens: TokenStore;\n}\n\nexport const NETWORK = 'celo/NETWORK';\nexport const CONNECT = 'celo/CONNECT';\nexport const ACCOUNT = 'celo/ACCOUNT';\nexport const DEXFAIR = 'celo/DEXFAIR';\nexport const SETTING = 'celo/SETTING';\nexport const INSERT = 'tokens/INSERT';\nexport const REMOVE = 'tokens/REMOVE';\nexport const UPDATE = 'tokens/UPDATE';\n\ninterface NetworkUpdate {\n\ttype: typeof NETWORK;\n\tmeta: {\n\t\tnetwork: string;\n\t};\n}\n\ninterface NetworkConnect {\n\ttype: typeof CONNECT;\n\tmeta: {\n\t\tconnection: boolean;\n\t};\n}\n\ninterface AccountUpdate {\n\ttype: typeof ACCOUNT;\n\tmeta: {\n\t\taddress: string;\n\t};\n}\n\ninterface DexfairUpdate {\n\ttype: typeof DEXFAIR;\n\tpayload: Dexfair;\n}\n\ninterface DexfairSetting {\n\ttype: typeof SETTING;\n\tmeta: {\n\t\tkey: string;\n\t\tvalue: string;\n\t};\n}\n\ninterface TokenInsert {\n\ttype: typeof INSERT;\n\tmeta: {\n\t\tnetwork: string;\n\t\ttoken: Token;\n\t};\n}\n\ninterface TokenUpdate {\n\ttype: typeof UPDATE;\n\tmeta: {\n\t\tnetwork: string;\n\t\taddress: string;\n\t\tbalance: string;\n\t};\n}\n\ninterface TokenRemove {\n\ttype: typeof REMOVE;\n\tmeta: {\n\t\tnetwork: string;\n\t\taddress: string;\n\t};\n}\n\nfunction networkUpdate(network: string): NetworkUpdate {\n\treturn {\n\t\ttype: NETWORK,\n\t\tmeta: {\n\t\t\tnetwork,\n\t\t},\n\t};\n}\n\nfunction networkConnect(connection: boolean): NetworkConnect {\n\treturn {\n\t\ttype: CONNECT,\n\t\tmeta: {\n\t\t\tconnection,\n\t\t},\n\t};\n}\n\nfunction accountUpdate(address: string): AccountUpdate {\n\treturn {\n\t\ttype: ACCOUNT,\n\t\tmeta: {\n\t\t\taddress,\n\t\t},\n\t};\n}\n\nfunction dexfairUpdate(dexfair: {\n\taddress: { [key: string]: string | null | undefined };\n\tabi: AbiItem[];\n}): DexfairUpdate {\n\treturn {\n\t\ttype: DEXFAIR,\n\t\tpayload: dexfair,\n\t};\n}\n\nfunction dexfairSetting(key: string, value: string): DexfairSetting {\n\treturn {\n\t\ttype: SETTING,\n\t\tmeta: {\n\t\t\tkey,\n\t\t\tvalue,\n\t\t},\n\t};\n}\n\nfunction tokenInsert(network: string, token: Token): TokenInsert {\n\treturn {\n\t\ttype: INSERT,\n\t\tmeta: {\n\t\t\tnetwork,\n\t\t\ttoken,\n\t\t},\n\t};\n}\n\nfunction tokenUpdate(network: string, address: string, balance: string): TokenUpdate {\n\treturn {\n\t\ttype: UPDATE,\n\t\tmeta: {\n\t\t\tnetwork,\n\t\t\taddress,\n\t\t\tbalance,\n\t\t},\n\t};\n}\n\nfunction tokenRemove(network: string, address: string): TokenRemove {\n\treturn {\n\t\ttype: REMOVE,\n\t\tmeta: {\n\t\t\tnetwork,\n\t\t\taddress,\n\t\t},\n\t};\n}\n\nexport type TokenActionTypes =\n\t| NetworkUpdate\n\t| NetworkConnect\n\t| AccountUpdate\n\t| DexfairUpdate\n\t| DexfairSetting\n\t| TokenInsert\n\t| TokenUpdate\n\t| TokenRemove;\nexport const actionCreators = {\n\tnetworkUpdate,\n\tnetworkConnect,\n\taccountUpdate,\n\tdexfairUpdate,\n\tdexfairSetting,\n\ttokenInsert,\n\ttokenUpdate,\n\ttokenRemove,\n};\n\nconst initialState: DexfairStore = {\n\tcelo: new Celo(NETWORKS.Mainnet),\n\tnetwork: 'Mainnet',\n\tisConnected: false,\n\taccount: '',\n\tcontract: { address: {}, abi: [] },\n\tsettings: {\n\t\tslippage: {\n\t\t\tname: 'Slippage tolerance',\n\t\t\tdesc: 'Transaction will revert if the price is too expensive.',\n\t\t\tunit: '%',\n\t\t\tvalue: '95',\n\t\t},\n\t\tdeadline: {\n\t\t\tname: 'Transaction deadline',\n\t\t\tdesc: 'Transaction will revert if pending is too long.',\n\t\t\tunit: 'min',\n\t\t\tvalue: '5',\n\t\t},\n\t},\n\ttokens: {\n\t\tMainnet: {\n\t\t\tlist: [],\n\t\t\tbalance: {},\n\t\t},\n\t\tAlfajores: {\n\t\t\tlist: [],\n\t\t\tbalance: {},\n\t\t},\n\t\tBaklava: {\n\t\t\tlist: [],\n\t\t\tbalance: {},\n\t\t},\n\t},\n};\n\nexport function dexfairStoreReducer(state = initialState, action: TokenActionTypes): DexfairStore {\n\tswitch (action.type) {\n\t\tcase NETWORK:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: action.meta.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: state.tokens,\n\t\t\t};\n\t\tcase CONNECT:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: action.meta.connection,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: state.tokens,\n\t\t\t};\n\t\tcase ACCOUNT:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: action.meta.address,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: state.tokens,\n\t\t\t};\n\t\tcase DEXFAIR:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: action.payload,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: state.tokens,\n\t\t\t};\n\t\tcase SETTING:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: {\n\t\t\t\t\t...state.settings,\n\t\t\t\t\t[action.meta.key]: { ...state.settings[action.meta.key], value: action.meta.value },\n\t\t\t\t},\n\t\t\t\ttokens: state.tokens,\n\t\t\t};\n\t\tcase INSERT:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: {\n\t\t\t\t\t...state.tokens,\n\t\t\t\t\t[action.meta.network]: {\n\t\t\t\t\t\tlist: [...state.tokens[state.network].list, action.meta.token],\n\t\t\t\t\t\tbalance: {\n\t\t\t\t\t\t\t...state.tokens[action.meta.network].balance,\n\t\t\t\t\t\t\t[action.meta.token.address]: '',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\tcase UPDATE:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: {\n\t\t\t\t\t...state.tokens,\n\t\t\t\t\t[action.meta.network]: {\n\t\t\t\t\t\tlist: state.tokens[action.meta.network].list,\n\t\t\t\t\t\tbalance: {\n\t\t\t\t\t\t\t...state.tokens[action.meta.network].balance,\n\t\t\t\t\t\t\t[action.meta.address]: action.meta.balance,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\tcase REMOVE:\n\t\t\treturn {\n\t\t\t\tcelo: state.celo,\n\t\t\t\tnetwork: state.network,\n\t\t\t\tisConnected: state.isConnected,\n\t\t\t\taccount: state.account,\n\t\t\t\tcontract: state.contract,\n\t\t\t\tsettings: state.settings,\n\t\t\t\ttokens: {\n\t\t\t\t\t...state.tokens,\n\t\t\t\t\t[action.meta.network]: {\n\t\t\t\t\t\tlist: state.tokens[action.meta.network].list.filter((token) => token.address !== action.meta.address),\n\t\t\t\t\t\tbalance: { ...state.tokens[action.meta.network].balance, [action.meta.address]: undefined },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import React from 'react';\nimport { Button, Form, Dropdown, DropdownButton, InputGroup, Image } from 'react-bootstrap';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, actionCreators as storeActions } from '../store/modules/dexfair';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\ttokenList: Token[];\n\ttoken: Token;\n\tlabel: string;\n\tenabled: boolean;\n\tamount: string;\n\ttext?: string;\n\tsuccess: string;\n\terror: string;\n\tupdateAmount: (amount: string) => void;\n\tchangeToken: (token: Token) => void;\n\tgetAllowance: (token: Token) => Promise<string>;\n\tsetApprove?: (token: Token, callback: () => Promise<void>) => void;\n}\n\nconst FormToken: React.FunctionComponent<Props> = (props) => {\n\tconst [approved, setApproved] = React.useState<boolean>(false);\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\ttokenList,\n\t\ttoken,\n\t\tlabel,\n\t\tenabled,\n\t\tamount,\n\t\ttext,\n\t\tsuccess,\n\t\terror,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\tupdateAmount,\n\t\tchangeToken,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tupdateApproved();\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, enabled, token]);\n\n\tasync function updateApproved() {\n\t\tif (token.address) {\n\t\t\tconst result = await getAllowance(token);\n\t\t\tsetApproved(celo.kit.web3.utils.toBN(result).gt(celo.kit.web3.utils.toBN('0')));\n\t\t}\n\t}\n\n\tfunction getList() {\n\t\tconst items = tokenList.map((element, index) => (\n\t\t\t<Dropdown.Item key={`T_${index.toString()}`} eventKey={JSON.stringify(element)}>\n\t\t\t\t{element.symbol}\n\t\t\t</Dropdown.Item>\n\t\t));\n\t\treturn items;\n\t}\n\n\treturn (\n\t\t<div className=\"FormToken\">\n\t\t\t<Form.Group>\n\t\t\t\t<Form.Text>{label}</Form.Text>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<InputGroup.Prepend>\n\t\t\t\t\t\t<InputGroup.Text>\n\t\t\t\t\t\t\t<Image hidden={!token.icon} src={token ? token.icon : ''} style={{ height: '24px' }} />\n\t\t\t\t\t\t\t<i hidden={!!token.icon} className=\"fas fa-question-circle\" />\n\t\t\t\t\t\t</InputGroup.Text>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"danger\"\n\t\t\t\t\t\t\thidden={approved || !isConnected}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tif (setApprove) {\n\t\t\t\t\t\t\t\t\tsetApprove(token, async () => {\n\t\t\t\t\t\t\t\t\t\tawait updateApproved();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-lock\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</InputGroup.Prepend>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\t\treadOnly={!enabled}\n\t\t\t\t\t\tdisabled={!enabled}\n\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tupdateAmount(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<DropdownButton\n\t\t\t\t\t\thidden={tokenList.length === 0 || !token || !token.symbol}\n\t\t\t\t\t\tas={InputGroup.Append}\n\t\t\t\t\t\tvariant=\"outline-secondary\"\n\t\t\t\t\t\ttitle={token ? token.symbol : ''}\n\t\t\t\t\t\tonSelect={async (e: string | null) => {\n\t\t\t\t\t\t\tif (e) {\n\t\t\t\t\t\t\t\tconst temp: Token = JSON.parse(e);\n\t\t\t\t\t\t\t\tif (temp.address !== token.address) {\n\t\t\t\t\t\t\t\t\tchangeToken(temp);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{getList()}\n\t\t\t\t\t</DropdownButton>\n\t\t\t\t</InputGroup>\n\t\t\t\t<Form.Text className=\"text-danger\">{error}</Form.Text>\n\t\t\t\t<Form.Text className=\"text-success\" hidden={error !== ''}>\n\t\t\t\t\t{success}\n\t\t\t\t</Form.Text>\n\t\t\t\t<Form.Text className=\"text-muted\" hidden={success !== '' || error !== ''}>\n\t\t\t\t\t{text}&nbsp;\n\t\t\t\t</Form.Text>\n\t\t\t</Form.Group>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(FormToken);\n","import React from 'react';\nimport { Button, Form } from 'react-bootstrap';\nimport { debounce } from 'lodash';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport FormToken from './FormToken';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\ttokens: TokenStore;\n\thidden: boolean;\n\testimateFee: (gas: number) => string;\n\topenTxModal: (txData: TxData) => void;\n}\n\nconst Transfer: React.FunctionComponent<Props> = (props) => {\n\tconst [token, setToken] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\tconst [to, setTo] = React.useState<string>('');\n\tconst [amount, setAmount] = React.useState<string>('');\n\tconst [error0, setError0] = React.useState<string>('');\n\tconst [success1, setSuccess1] = React.useState<string>('');\n\tconst [error1, setError1] = React.useState<string>('');\n\tconst [disable, setDisable] = React.useState<boolean>(false);\n\n\tconst { celo, network, isConnected, account, tokens, hidden, estimateFee, openTxModal } = props;\n\n\tReact.useEffect(() => {\n\t\tif (tokens[network].list.length > 0 && token.address !== tokens[network].list[0].address) {\n\t\t\tsetToken(tokens[network].list[0]);\n\t\t\tsetTo('');\n\t\t} else if (tokens[network].list.length === 0 && token.address) {\n\t\t\tsetToken({ icon: '', symbol: '', address: '' });\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, tokens]);\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst delayedQuery = React.useCallback(debounce(estimate, 300), [amount, token, to]);\n\n\tasync function estimate(value: string) {\n\t\tif (value !== '' && celo.kit.web3.utils.isAddress(account) && celo.kit.web3.utils.isAddress(to)) {\n\t\t\ttry {\n\t\t\t\tif (token.address === tokens[network].list[0].address) {\n\t\t\t\t\tconst temp = celo.kit.web3.utils.toWei(value);\n\t\t\t\t\tconst gas = await celo.kit.web3.eth.estimateGas({\n\t\t\t\t\t\tfrom: account,\n\t\t\t\t\t\tto,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t});\n\t\t\t\t\tconst total = celo.kit.web3.utils.toBN(temp).add(celo.kit.web3.utils.toBN(gas));\n\t\t\t\t\tconst balance = celo.kit.web3.utils.toBN(\n\t\t\t\t\t\ttokens[network].balance[tokens[network].list[0].address] || (await celo.kit.web3.eth.getBalance(account))\n\t\t\t\t\t);\n\t\t\t\t\tif (balance.lt(total)) {\n\t\t\t\t\t\tsetDisable(true);\n\t\t\t\t\t\tsetSuccess1('');\n\t\t\t\t\t\tsetError1('out of balance');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetDisable(false);\n\t\t\t\t\tsetSuccess1(`fee : ${estimateFee(gas)}`);\n\t\t\t\t\tsetError1('');\n\t\t\t\t} else {\n\t\t\t\t\tconst gas = await celo.kit.web3.eth.estimateGas({\n\t\t\t\t\t\tfrom: account,\n\t\t\t\t\t\tto: token.address,\n\t\t\t\t\t\tdata: celo.contracts.erc20.methods.transfer(to, celo.kit.web3.utils.toWei(value)).encodeABI(),\n\t\t\t\t\t});\n\t\t\t\t\tsetDisable(false);\n\t\t\t\t\tsetSuccess1(`fee : ${estimateFee(gas)}`);\n\t\t\t\t\tsetError1('');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(new Error(e));\n\t\t\t\tsetDisable(true);\n\t\t\t\tsetSuccess1('');\n\t\t\t\tsetError1(e.message ? e.message : e.Error.toString());\n\t\t\t}\n\t\t} else {\n\t\t\tsetDisable(true);\n\t\t\tsetSuccess1('');\n\t\t\tsetError1('');\n\t\t}\n\t}\n\n\tfunction onTransfer() {\n\t\tif (celo.kit.web3.utils.isAddress(account) && to !== '' && amount !== '' && celo.kit.web3.utils.isAddress(to)) {\n\t\t\tif (token.address === tokens[network].list[0].address) {\n\t\t\t\topenTxModal({\n\t\t\t\t\ttitle: 'Transfer',\n\t\t\t\t\tceloTx: { from: account, to, value: celo.kit.web3.utils.toWei(amount) },\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log('Transfer 0');\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\topenTxModal({\n\t\t\t\t\ttitle: 'Transfer',\n\t\t\t\t\tceloTx: {\n\t\t\t\t\t\tfrom: account,\n\t\t\t\t\t\tto: token.address,\n\t\t\t\t\t\tdata: celo.contracts.erc20.methods.transfer(to, celo.kit.web3.utils.toWei(amount)).encodeABI(),\n\t\t\t\t\t},\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log('Transfer 1');\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"Transfer\" hidden={hidden}>\n\t\t\t<Form>\n\t\t\t\t<fieldset disabled={!isConnected}>\n\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t<Form.Text>To</Form.Text>\n\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"0x\"\n\t\t\t\t\t\t\tisInvalid={to.length > 0 && !celo.kit.web3.utils.isAddress(to)}\n\t\t\t\t\t\t\tisValid={to.length > 0 && celo.kit.web3.utils.isAddress(to)}\n\t\t\t\t\t\t\tvalue={to}\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\tif (celo.kit.web3.utils.isAddress(e.target.value)) {\n\t\t\t\t\t\t\t\t\tsetError0('');\n\t\t\t\t\t\t\t\t\tsetTo(e.target.value);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetError0(e.target.value.length > 0 ? 'is not address' : '');\n\t\t\t\t\t\t\t\t\tsetTo(e.target.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">{error0}</Form.Control.Feedback>\n\t\t\t\t\t\t<Form.Text className=\"text-muted\" hidden={error0.length > 0}>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</Form.Text>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t\t<FormToken\n\t\t\t\t\t\ttokenList={tokens[network].list}\n\t\t\t\t\t\ttoken={token}\n\t\t\t\t\t\tlabel=\"Amount\"\n\t\t\t\t\t\tenabled={celo.kit.web3.utils.isAddress(to)}\n\t\t\t\t\t\tamount={amount}\n\t\t\t\t\t\tsuccess={success1}\n\t\t\t\t\t\terror={error1}\n\t\t\t\t\t\tgetAllowance={async (_token: Token) => {\n\t\t\t\t\t\t\treturn '99999999999999999999999999999999';\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tupdateAmount={(_amount: string) => {\n\t\t\t\t\t\t\tsetAmount(_amount);\n\t\t\t\t\t\t\tdelayedQuery(_amount);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tchangeToken={(_token: Token) => {\n\t\t\t\t\t\t\tsetAmount('');\n\t\t\t\t\t\t\tsetToken(_token);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant={isConnected ? 'primary' : 'secondary'}\n\t\t\t\t\t\tonClick={onTransfer}\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t!amount ||\n\t\t\t\t\t\t\tdisable ||\n\t\t\t\t\t\t\terror0 !== '' ||\n\t\t\t\t\t\t\terror1 !== '' ||\n\t\t\t\t\t\t\tsuccess1 === '' ||\n\t\t\t\t\t\t\t!celo.kit.web3.utils.isAddress(to)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tblock\n\t\t\t\t\t>\n\t\t\t\t\t\tTransfer\n\t\t\t\t\t</Button>\n\t\t\t\t</fieldset>\n\t\t\t</Form>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(Transfer);\n","import React from 'react';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport FormToken from './FormToken';\n\ninterface Props {\n\ttokenList: Token[];\n\tslot0: {\n\t\tlabel?: string;\n\t\ttoken: Token;\n\t\tenable: boolean;\n\t\tamount: string;\n\t\ttext?: string;\n\t\tsuccess: string;\n\t\terror: string;\n\t};\n\tslot1: {\n\t\tlabel?: string;\n\t\ttoken: Token;\n\t\tenable: boolean;\n\t\tamount: string;\n\t\ttext?: string;\n\t\tsuccess: string;\n\t\terror: string;\n\t};\n\tupdateAmount: (slot: number, amount: string) => void;\n\tchangeToken: (slot: number, token: Token) => void;\n\tgetAllowance: (token: Token) => Promise<string>;\n\tsetApprove: (token: Token, callback: () => Promise<void>) => void;\n}\n\nconst FormTokenPair: React.FunctionComponent<Props> = (props) => {\n\tconst { tokenList, slot0, slot1, updateAmount, changeToken, getAllowance, setApprove } = props;\n\n\treturn (\n\t\t<div className=\"DexfairLiquidity\">\n\t\t\t<FormToken\n\t\t\t\ttokenList={tokenList}\n\t\t\t\ttoken={slot0.token}\n\t\t\t\tlabel={slot0.label || slot0.token.symbol}\n\t\t\t\tenabled={slot0.enable}\n\t\t\t\tamount={slot0.amount}\n\t\t\t\ttext={slot0.text}\n\t\t\t\tsuccess={slot0.success}\n\t\t\t\terror={slot0.error}\n\t\t\t\tgetAllowance={async (_token: Token) => {\n\t\t\t\t\tconst amount = await getAllowance(_token);\n\t\t\t\t\treturn amount;\n\t\t\t\t}}\n\t\t\t\tsetApprove={setApprove}\n\t\t\t\tupdateAmount={(_amount: string) => {\n\t\t\t\t\tupdateAmount(0, _amount);\n\t\t\t\t}}\n\t\t\t\tchangeToken={(_token: Token) => {\n\t\t\t\t\tchangeToken(0, _token);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<FormToken\n\t\t\t\ttokenList={tokenList}\n\t\t\t\ttoken={slot1.token}\n\t\t\t\tlabel={slot1.label || slot1.token.symbol}\n\t\t\t\tenabled={slot1.enable}\n\t\t\t\tamount={slot1.amount}\n\t\t\t\ttext={slot1.text}\n\t\t\t\tsuccess={slot1.success}\n\t\t\t\terror={slot1.error}\n\t\t\t\tgetAllowance={async (_token: Token) => {\n\t\t\t\t\tconst amount = await getAllowance(_token);\n\t\t\t\t\treturn amount;\n\t\t\t\t}}\n\t\t\t\tsetApprove={setApprove}\n\t\t\t\tupdateAmount={async (_amount: string) => {\n\t\t\t\t\tupdateAmount(1, _amount);\n\t\t\t\t}}\n\t\t\t\tchangeToken={(_token: Token) => {\n\t\t\t\t\tchangeToken(1, _token);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(FormTokenPair);\n","import React from 'react';\nimport { Button } from 'react-bootstrap';\nimport { debounce } from 'lodash';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport FormTokenPair from './FormTokenPair';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tsettings: Settings;\n\ttokens: TokenStore;\n\thidden: boolean;\n\tgetAllowance: (addrContract: string, addrToken: string) => Promise<string>;\n\tsetApprove: (addrContract: string, addrToken: string, callback: () => Promise<void>) => void;\n\testimateFee: (gas: number) => string;\n\topenTxModal: (txData: TxData) => void;\n}\n\nconst Exchange: React.FunctionComponent<Props> = (props) => {\n\tconst [tokenList, setTokenList] = React.useState<Token[]>([]);\n\tconst [token0, setToken0] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\tconst [token1, setToken1] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\tconst [amount0, setAmount0] = React.useState<string>('');\n\tconst [amount1, setAmount1] = React.useState<string>('');\n\tconst [success0, setSuccess0] = React.useState<string>('');\n\tconst [error0, setError0] = React.useState<string>('');\n\tconst [exchange, setExchange] = React.useState<any>(null);\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\taccount,\n\t\tsettings,\n\t\ttokens,\n\t\thidden,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\testimateFee,\n\t\topenTxModal,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tasync function init() {\n\t\t\tif (!exchange) {\n\t\t\t\tconst temp = await celo.kit.contracts.getExchange();\n\t\t\t\tsetExchange(temp);\n\t\t\t\tsetTokenList([tokens[network].list[0], tokens[network].list[1]]);\n\t\t\t\tsetToken0(tokens[network].list[0]);\n\t\t\t\tsetToken1(tokens[network].list[1]);\n\t\t\t}\n\t\t}\n\t\tif (tokens[network].list.length > 1) {\n\t\t\tinit();\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, tokens]);\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst delayedQuery = React.useCallback(debounce(getEstimate, 300), [amount0, token0, token1]);\n\n\tasync function getEstimate(\n\t\ttokenSell: Token,\n\t\tsellAmount: string,\n\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\ttokenBuy: Token\n\t) {\n\t\tif (sellAmount !== '') {\n\t\t\tconst sell = celo.kit.web3.utils.toWei(sellAmount).toString();\n\t\t\tconst sellGold = tokenSell.address === tokenList[0].address;\n\t\t\tconst buyAmount = await exchange.contract.methods.getBuyTokenAmount(sell, sellGold).call();\n\n\t\t\tconst buy = celo.kit.web3.utils\n\t\t\t\t.toBN(buyAmount.toString())\n\t\t\t\t.mul(\n\t\t\t\t\tcelo.kit.web3.utils.toBN(\n\t\t\t\t\t\tparseInt((1000 - parseInt(settings.slippage.value, 10) * 10).toString(), 10).toString()\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.div(celo.kit.web3.utils.toBN(1000))\n\t\t\t\t.toString();\n\n\t\t\tif (celo.kit.web3.utils.isAddress(account)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst gas = await celo.kit.web3.eth.estimateGas({\n\t\t\t\t\t\tfrom: account,\n\t\t\t\t\t\tto: exchange.address,\n\t\t\t\t\t\tdata: exchange.contract.methods.exchange(sell, buy, sellGold).encodeABI(),\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tokenSell.address === tokenList[0].address) {\n\t\t\t\t\t\tconst total = celo.kit.web3.utils.toBN(sell).add(celo.kit.web3.utils.toBN(gas));\n\t\t\t\t\t\tconst balance = celo.kit.web3.utils.toBN(await celo.kit.web3.eth.getBalance(account)); // TODO: redux getBalance\n\t\t\t\t\t\tif (balance.lt(total)) {\n\t\t\t\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\t\t\t\tsetError0('out of balance');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\t\tsetSuccess0(`fee : ${estimateFee(gas)}`);\n\t\t\t\t\tsetError0('');\n\t\t\t\t} catch (e) {\n\t\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\t\tsetError0(e.message ? e.message : e.Error.toString());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\tsetError0('');\n\t\t\t}\n\t\t} else {\n\t\t\tsetAmount1('');\n\t\t\tsetSuccess0('');\n\t\t\tsetError0('');\n\t\t}\n\t}\n\n\tfunction onExchange() {\n\t\tif (celo.kit.web3.utils.isAddress(account) && amount0 !== '') {\n\t\t\tconst sell = celo.kit.web3.utils.toWei(amount0);\n\t\t\tconst buy = celo.kit.web3.utils\n\t\t\t\t.toBN(celo.kit.web3.utils.toWei(amount1))\n\t\t\t\t.mul(\n\t\t\t\t\tcelo.kit.web3.utils.toBN(\n\t\t\t\t\t\tparseInt((1000 - parseInt(settings.slippage.value, 10) * 10).toString(), 10).toString()\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.div(celo.kit.web3.utils.toBN(1000))\n\t\t\t\t.toString();\n\t\t\tconst sellGold = token0.address === tokens[network].list[0].address;\n\t\t\topenTxModal({\n\t\t\t\ttitle: 'Exchange',\n\t\t\t\tceloTx: {\n\t\t\t\t\tfrom: account,\n\t\t\t\t\tto: exchange.address,\n\t\t\t\t\tdata: exchange.contract.methods.exchange(sell, buy, sellGold).encodeABI(),\n\t\t\t\t},\n\t\t\t\tcallback: () => {\n\t\t\t\t\tconsole.log('exchange');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"Exchange\" hidden={hidden}>\n\t\t\t<FormTokenPair\n\t\t\t\ttokenList={tokenList}\n\t\t\t\tslot0={{ label: 'Sell', token: token0, enable: true, amount: amount0, success: success0, error: error0 }}\n\t\t\t\tslot1={{ label: 'Buy (estimated)', token: token1, enable: false, amount: amount1, success: '', error: '' }}\n\t\t\t\tgetAllowance={async (token: Token) => {\n\t\t\t\t\tconst result = await getAllowance(exchange.address, token.address);\n\t\t\t\t\treturn result;\n\t\t\t\t}}\n\t\t\t\tsetApprove={(token: Token, callback) => {\n\t\t\t\t\tsetApprove(exchange.address, token.address, callback);\n\t\t\t\t}}\n\t\t\t\tupdateAmount={(slot: number, amount: string) => {\n\t\t\t\t\tswitch (slot) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tsetAmount0(amount);\n\t\t\t\t\t\t\tdelayedQuery(token0, amount, token1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn { amount: '', success: '', error: '' };\n\t\t\t\t}}\n\t\t\t\tchangeToken={(slot: number, token: Token) => {\n\t\t\t\t\tswitch (slot) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tif (token1.address === token.address) {\n\t\t\t\t\t\t\t\tsetToken1(token0);\n\t\t\t\t\t\t\t\tsetToken0(token);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetToken0(token);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tsetToken1(token);\n\t\t\t\t\t\t\tif (token0.address === token.address) {\n\t\t\t\t\t\t\t\tsetToken0(token1);\n\t\t\t\t\t\t\t\tsetToken1(token);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetToken1(token);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tsetAmount0('');\n\t\t\t\t\tsetAmount1('');\n\t\t\t\t\tsetSuccess0('');\n\t\t\t\t\tsetError0('');\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tvariant={isConnected ? 'primary' : 'secondary'}\n\t\t\t\tonClick={onExchange}\n\t\t\t\tdisabled={!isConnected || error0 !== '' || amount0 === '' || success0 === ''}\n\t\t\t\tblock\n\t\t\t>\n\t\t\t\tExchange\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(Exchange);\n","import React from 'react';\nimport { Button, Form, Row, Col } from 'react-bootstrap';\nimport { CSSTransition } from 'react-transition-group';\nimport { debounce } from 'lodash';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, Dexfair, Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport FormTokenPair from './FormTokenPair';\nimport '../animation.css';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tsettings: Settings;\n\ttokens: TokenStore;\n\tcontract: Dexfair;\n\thidden: boolean;\n\tgetAllowance: (addrContract: string, addrToken: string) => Promise<string>;\n\tsetApprove: (addrContract: string, addrToken: string, callback: () => Promise<void>) => void;\n\testimateFee: (gas: number) => string;\n\topenTxModal: (txData: TxData) => void;\n}\n\nconst DexfairExchange: React.FunctionComponent<Props> = (props) => {\n\tconst [token0, setToken0] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\tconst [token1, setToken1] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\tconst [amount0, setAmount0] = React.useState<string>('');\n\tconst [amount1, setAmount1] = React.useState<string>('');\n\tconst [success0, setSuccess0] = React.useState<string>('');\n\tconst [error0, setError0] = React.useState<string>('');\n\tconst [otcEnable, setOtcEnable] = React.useState<boolean>(false);\n\n\tconst [exchange, setExchange] = React.useState<any>(null);\n\tconst [pair, setPair] = React.useState<{\n\t\tadr: string;\n\t\tnetProfitBurn?: string;\n\t\tnetProfitExchange?: string;\n\t\ttokens?: string[];\n\t\treserves?: string[];\n\t}>({ adr: '' });\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\taccount,\n\t\ttokens,\n\t\tcontract,\n\t\tsettings,\n\t\thidden,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\testimateFee,\n\t\topenTxModal,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tif (tokens[network].list.length > 1) {\n\t\t\tconst address = contract.address[network];\n\t\t\tif (!exchange && address) {\n\t\t\t\tconst temp = new celo.kit.web3.eth.Contract(contract.abi, address);\n\t\t\t\tsetExchange(temp);\n\t\t\t} else if (exchange) {\n\t\t\t\tsetToken0(tokens[network].list[0]);\n\t\t\t\tsetToken1(tokens[network].list[1]);\n\t\t\t\tupdatePair(tokens[network].list[0], tokens[network].list[1]);\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, tokens, exchange]);\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst delayedQuery = React.useCallback(debounce(getEstimate, 300), [amount0, token0, token1]);\n\n\tasync function updatePair(tokenA: Token, tokenB: Token) {\n\t\tif (exchange) {\n\t\t\tconst pairStatus = await exchange.methods.getPair([tokenA.address, tokenB.address]).call();\n\t\t\tsetPair(pairStatus);\n\t\t} else {\n\t\t\tsetPair({ adr: '' });\n\t\t}\n\t}\n\n\tfunction createPair() {\n\t\topenTxModal({\n\t\t\ttitle: 'Create Pair',\n\t\t\tceloTx: {\n\t\t\t\tfrom: account,\n\t\t\t\tto: exchange.options.address,\n\t\t\t\tdata: exchange.methods.register([token0.address, token1.address]).encodeABI(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log('Exchange');\n\t\t\t},\n\t\t});\n\t}\n\n\tfunction getDeadline() {\n\t\treturn Math.floor(new Date().getTime() / 1000) + parseInt(settings.deadline.value, 10) * 60;\n\t}\n\n\tasync function getEstimate(tokenSell: Token, sellAmount: string, tokenBuy: Token) {\n\t\tif (sellAmount !== '') {\n\t\t\tconst deadline = getDeadline();\n\t\t\tconst sell = celo.kit.web3.utils.toWei(sellAmount).toString();\n\t\t\tconst buyAmount = await exchange.methods.getBuyTokenAmount([tokenSell.address, tokenBuy.address], sell).call();\n\n\t\t\tconst buy = celo.kit.web3.utils\n\t\t\t\t.toBN(buyAmount)\n\t\t\t\t.mul(\n\t\t\t\t\tcelo.kit.web3.utils.toBN(\n\t\t\t\t\t\tparseInt((1000 - parseInt(settings.slippage.value, 10) * 10).toString(), 10).toString()\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.div(celo.kit.web3.utils.toBN(1000))\n\t\t\t\t.toString();\n\n\t\t\tif (celo.kit.web3.utils.isAddress(account)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst gas = await celo.kit.web3.eth.estimateGas({\n\t\t\t\t\t\tfrom: account,\n\t\t\t\t\t\tto: exchange.options.address,\n\t\t\t\t\t\tdata: exchange.methods.exchange([tokenSell.address, tokenBuy.address], [sell, buy], deadline).encodeABI(),\n\t\t\t\t\t});\n\n\t\t\t\t\tif (tokenSell.address === tokens[network].list[0].address) {\n\t\t\t\t\t\tconst total = celo.kit.web3.utils.toBN(sell).add(celo.kit.web3.utils.toBN(gas));\n\t\t\t\t\t\tconst balance = celo.kit.web3.utils.toBN(\n\t\t\t\t\t\t\ttokens[network].balance[tokens[network].list[0].address] || (await celo.kit.web3.eth.getBalance(account))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (balance.lt(total)) {\n\t\t\t\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\t\t\t\tsetError0('out of balance');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\t\tsetSuccess0(`fee : ${estimateFee(gas)}`);\n\t\t\t\t\tsetError0('');\n\t\t\t\t} catch (e) {\n\t\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\t\tsetError0(e.message ? e.message : e.Error.toString());\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(buyAmount.toString()));\n\t\t\t\tsetError0('');\n\t\t\t}\n\t\t} else {\n\t\t\tsetAmount1('');\n\t\t\tsetSuccess0('');\n\t\t\tsetError0('');\n\t\t}\n\t}\n\n\tfunction onExchange() {\n\t\tconst deadline = getDeadline();\n\t\tconst sell = celo.kit.web3.utils.toWei(amount0);\n\t\tconst buy = celo.kit.web3.utils\n\t\t\t.toBN(celo.kit.web3.utils.toWei(amount1))\n\t\t\t.mul(celo.kit.web3.utils.toBN(parseInt(settings.slippage.value, 10) * 10))\n\t\t\t.div(celo.kit.web3.utils.toBN(1000))\n\t\t\t.toString();\n\n\t\topenTxModal({\n\t\t\ttitle: 'Exchange',\n\t\t\tceloTx: {\n\t\t\t\tfrom: account,\n\t\t\t\tto: exchange.options.address,\n\t\t\t\tdata: exchange.methods.exchange([token0.address, token1.address], [sell, buy], deadline).encodeABI(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log('Exchange');\n\t\t\t},\n\t\t});\n\t}\n\n\tasync function onOTCCreate() {\n\t\tconst deadline = getDeadline();\n\t\tconst sell = celo.kit.web3.utils.toWei(amount0);\n\t\tconst buy = celo.kit.web3.utils\n\t\t\t.toBN(celo.kit.web3.utils.toWei(amount1))\n\t\t\t.mul(celo.kit.web3.utils.toBN(parseInt(settings.slippage.value, 10) * 10))\n\t\t\t.div(celo.kit.web3.utils.toBN(1000))\n\t\t\t.toString();\n\n\t\tconst chainId = await celo.kit.web3.eth.getChainId();\n\t\tconst otcSigner = exchange.methods.otc(chainId, [token0.address, token1.address], [sell, buy], deadline);\n\t\tconst otcSender = exchange.methods.otc(\n\t\t\tchainId,\n\t\t\t[token0.address, token1.address],\n\t\t\t[sell, buy],\n\t\t\tdeadline,\n\t\t\taccount,\n\t\t\t'0x'\n\t\t);\n\n\t\topenTxModal({\n\t\t\ttitle: 'Exchange - OTC (Maker)',\n\t\t\tmetaTx: {\n\t\t\t\tabi: {\n\t\t\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\t\t\tsigner: JSON.parse(JSON.stringify(otcSigner._method)),\n\t\t\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\t\t\tsender: JSON.parse(JSON.stringify(otcSender._method)),\n\t\t\t\t},\n\t\t\t\tparms: otcSigner.arguments,\n\t\t\t\tfrom: account,\n\t\t\t\tto: exchange.options.address,\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log('Exchange - OTC (Maker)');\n\t\t\t},\n\t\t});\n\t}\n\n\tfunction onOTCScan() {\n\t\topenTxModal({\n\t\t\ttitle: 'Exchange - OTC (Taker)',\n\t\t\tcallback: () => {\n\t\t\t\tconsole.log('Exchange - OTC');\n\t\t\t},\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className=\"DexfairExchange\" hidden={hidden}>\n\t\t\t<FormTokenPair\n\t\t\t\ttokenList={tokens[network].list}\n\t\t\t\tslot0={{\n\t\t\t\t\tlabel: 'Sell',\n\t\t\t\t\ttoken: token0,\n\t\t\t\t\tenable: celo.kit.web3.utils.isAddress(pair.adr) && pair.adr !== '0x0000000000000000000000000000000000000000',\n\t\t\t\t\tamount: amount0,\n\t\t\t\t\tsuccess: success0,\n\t\t\t\t\terror: error0,\n\t\t\t\t}}\n\t\t\t\tslot1={{ label: 'Buy (estimated)', token: token1, enable: false, amount: amount1, success: '', error: '' }}\n\t\t\t\tgetAllowance={async (token: Token) => {\n\t\t\t\t\tconst result = await getAllowance(exchange.options.address, token.address);\n\t\t\t\t\treturn result;\n\t\t\t\t}}\n\t\t\t\tsetApprove={(token: Token, callback) => {\n\t\t\t\t\tsetApprove(exchange.options.address, token.address, callback);\n\t\t\t\t}}\n\t\t\t\tupdateAmount={(slot: number, amount: string) => {\n\t\t\t\t\tswitch (slot) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tsetAmount0(amount);\n\t\t\t\t\t\t\tdelayedQuery(token0, amount, token1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\treturn { amount: '', success: '', error: '' };\n\t\t\t\t}}\n\t\t\t\tchangeToken={(slot: number, token: Token) => {\n\t\t\t\t\tswitch (slot) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tif (token1.address === token.address) {\n\t\t\t\t\t\t\t\tsetToken1(token0);\n\t\t\t\t\t\t\t\tsetToken0(token);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetToken0(token);\n\t\t\t\t\t\t\t\tupdatePair(token, token1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tsetToken1(token);\n\t\t\t\t\t\t\tif (token0.address === token.address) {\n\t\t\t\t\t\t\t\tsetToken0(token1);\n\t\t\t\t\t\t\t\tsetToken1(token);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetToken1(token);\n\t\t\t\t\t\t\t\tupdatePair(token0, token);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tsetAmount0('');\n\t\t\t\t\tsetAmount1('');\n\t\t\t\t\tsetSuccess0('');\n\t\t\t\t\tsetError0('');\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<fieldset disabled={!isConnected}>\n\t\t\t\t<CSSTransition in={!otcEnable} timeout={400} classNames=\"fade\" unmountOnExit>\n\t\t\t\t\t<Row hidden={otcEnable}>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={isConnected ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t\t!isConnected ||\n\t\t\t\t\t\t\t\t\t((error0 !== '' || amount0 === '' || success0 === '') &&\n\t\t\t\t\t\t\t\t\t\tpair.adr !== '0x0000000000000000000000000000000000000000')\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tif (pair.adr !== '0x0000000000000000000000000000000000000000') {\n\t\t\t\t\t\t\t\t\t\tonExchange();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tcreatePair();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{pair.adr !== '0x0000000000000000000000000000000000000000' ? 'Exchange' : 'Create Pair'}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</CSSTransition>\n\t\t\t\t<CSSTransition in={otcEnable} timeout={400} classNames=\"fade\" unmountOnExit>\n\t\t\t\t\t<Row hidden={!otcEnable}>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant={isConnected ? 'primary' : 'secondary'}\n\t\t\t\t\t\t\t\tdisabled={!isConnected || error0 !== '' || amount0 === '' || success0 === ''}\n\t\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\t\tonClick={onOTCCreate}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tMaker\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t<Button variant={isConnected ? 'primary' : 'secondary'} block onClick={onOTCScan}>\n\t\t\t\t\t\t\t\tTaker\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Col>\n\t\t\t\t\t</Row>\n\t\t\t\t</CSSTransition>\n\t\t\t\t<Form>\n\t\t\t\t\t<Form.Check\n\t\t\t\t\t\tid=\"otc-switch\"\n\t\t\t\t\t\ttype=\"switch\"\n\t\t\t\t\t\tlabel=\"OTC\"\n\t\t\t\t\t\tvalue=\"true\"\n\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\tchecked={otcEnable}\n\t\t\t\t\t\tonChange={(e: any) => {\n\t\t\t\t\t\t\tsetOtcEnable(e.target.checked);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Form>\n\t\t\t</fieldset>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(DexfairExchange);\n","import React from 'react';\nimport { InputGroup, Form, Button } from 'react-bootstrap';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, Dexfair, Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport FormTokenPair from './FormTokenPair';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tsettings: Settings;\n\ttokens: TokenStore;\n\tcontract: Dexfair;\n\ttoken0: Token;\n\ttoken1: Token;\n\tgetAllowance: (token: Token) => Promise<string>;\n\tsetApprove: (token: Token, callback: () => Promise<void>) => void;\n\tchangeToken: (slot: number, token: Token) => void;\n\tcreatePair: (callback: () => void) => void;\n\tpair: {\n\t\tadr: string;\n\t\tnetProfitBurn?: string;\n\t\tnetProfitExchange?: string;\n\t\ttokens?: string[];\n\t\treserves?: string[];\n\t\tbalance?: string;\n\t\ttotal?: string;\n\t};\n}\n\nconst DexfairLiquidityStatus: React.FunctionComponent<Props> = (props) => {\n\tconst [amount0, setAmount0] = React.useState<string>('');\n\tconst [amount1, setAmount1] = React.useState<string>('');\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\taccount,\n\t\ttokens,\n\t\ttoken0,\n\t\ttoken1,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\tchangeToken,\n\t\tcreatePair,\n\t\tpair,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tif (pair.adr && pair.adr !== '0x0000000000000000000000000000000000000000' && pair.tokens && pair.reserves) {\n\t\t\tif (pair.tokens[0] === token0.address) {\n\t\t\t\tsetAmount0(celo.kit.web3.utils.fromWei(pair.reserves[0]));\n\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(pair.reserves[1]));\n\t\t\t} else {\n\t\t\t\tsetAmount0(celo.kit.web3.utils.fromWei(pair.reserves[1]));\n\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(pair.reserves[0]));\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [token0, token1, pair, account]);\n\n\treturn (\n\t\t<div className=\"DexfairLiquidityStatus\">\n\t\t\t<FormTokenPair\n\t\t\t\ttokenList={tokens[network].list}\n\t\t\t\tslot0={{ token: token0, enable: false, amount: amount0, success: '', error: '' }}\n\t\t\t\tslot1={{ token: token1, enable: false, amount: amount1, success: '', error: '' }}\n\t\t\t\tgetAllowance={getAllowance}\n\t\t\t\tsetApprove={setApprove}\n\t\t\t\tupdateAmount={(slot: number, amount: string) => {\n\t\t\t\t\t// EMPTY\n\t\t\t\t}}\n\t\t\t\tchangeToken={changeToken}\n\t\t\t/>\n\t\t\t<Form.Group>\n\t\t\t\t<Form.Text>Total Supply</Form.Text>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<Form.Control value={pair.total} readOnly disabled />\n\t\t\t\t</InputGroup>\n\t\t\t</Form.Group>\n\t\t\t<Form.Group hidden={!isConnected}>\n\t\t\t\t<Form.Text>Liquidity</Form.Text>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<Form.Control value={pair.balance} readOnly disabled />\n\t\t\t\t</InputGroup>\n\t\t\t</Form.Group>\n\t\t\t<Button\n\t\t\t\tvariant={isConnected ? 'primary' : 'secondary'}\n\t\t\t\tdisabled={celo.kit.web3.utils.isAddress(pair.adr) || pair.adr === '0x0000000000000000000000000000000000000000'}\n\t\t\t\tblock\n\t\t\t\tonClick={() => {\n\t\t\t\t\tcreatePair(() => {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log('Pair Create..');\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tCrate Pair\n\t\t\t</Button>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(DexfairLiquidityStatus);\n","import React from 'react';\nimport { InputGroup, Form, Button } from 'react-bootstrap';\nimport { debounce } from 'lodash';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, Dexfair, Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport FormTokenPair from './FormTokenPair';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tsettings: Settings;\n\ttokens: TokenStore;\n\tcontract: Dexfair;\n\ttoken0: Token;\n\ttoken1: Token;\n\tgetAllowance: (token: Token) => Promise<string>;\n\tsetApprove: (token: Token, callback: () => Promise<void>) => void;\n\tchangeToken: (slot: number, token: Token) => void;\n\tpair: {\n\t\tadr: string;\n\t\tnetProfitBurn?: string;\n\t\tnetProfitExchange?: string;\n\t\ttokens?: string[];\n\t\treserves?: string[];\n\t\tbalance?: string;\n\t\ttotal?: string;\n\t};\n\texchange: any;\n\testimateFee: (gas: number) => string;\n\topenTxModal: (txData: TxData) => void;\n}\n\nconst DexfairLiquidityAdd: React.FunctionComponent<Props> = (props) => {\n\tconst [amount0, setAmount0] = React.useState<string>('');\n\tconst [amount1, setAmount1] = React.useState<string>('');\n\tconst [amount2, setAmount2] = React.useState<string>('');\n\n\tconst [text0, setText0] = React.useState<string>('');\n\tconst [text1, setText1] = React.useState<string>('');\n\tconst [success, setSuccess] = React.useState<string>('');\n\tconst [error, setError] = React.useState<string>('');\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\taccount,\n\t\tsettings,\n\t\ttokens,\n\t\ttoken0,\n\t\ttoken1,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\tchangeToken,\n\t\tpair,\n\t\texchange,\n\t\testimateFee,\n\t\topenTxModal,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tsetAmount0('');\n\t\tsetAmount1('');\n\t\tsetText0(updateBalance(tokens[network].balance[token0.address]));\n\t\tsetText1(updateBalance(tokens[network].balance[token1.address]));\n\t\tsetError('');\n\t\tsetSuccess('');\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, token0, token1, pair, tokens, account]);\n\n\tfunction updateBalance(balance: string | null | undefined) {\n\t\treturn balance && account ? `Balance : ${celo.kit.web3.utils.fromWei(balance)}` : '';\n\t}\n\n\tfunction getAmount1(amount: string) {\n\t\tif (pair.total !== undefined) {\n\t\t\tif (pair.reserves && pair.tokens) {\n\t\t\t\tconst reserve0 = pair.tokens[0] === token0.address ? pair.reserves[0] : pair.reserves[1];\n\t\t\t\tconst reserve1 = pair.tokens[1] === token1.address ? pair.reserves[1] : pair.reserves[0];\n\t\t\t\tconst a0 = celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(amount || '0'));\n\t\t\t\t// const a1 = celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(amount1 || '0'));\n\t\t\t\tconst a1 = a0.mul(celo.kit.web3.utils.toBN(reserve1)).div(celo.kit.web3.utils.toBN(reserve0));\n\t\t\t\tsetAmount1(celo.kit.web3.utils.fromWei(a1));\n\t\t\t\treturn celo.kit.web3.utils.fromWei(a1);\n\t\t\t}\n\t\t}\n\t\treturn '0';\n\t}\n\n\tfunction calcLp(_amount0: string, _amount1: string) {\n\t\tif (pair.total !== undefined) {\n\t\t\tconst total = celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.total));\n\t\t\tif (total.eq(celo.kit.web3.utils.toBN(0))) {\n\t\t\t\tconst ONE = celo.kit.web3.utils.toBN(1);\n\t\t\t\tconst TWO = celo.kit.web3.utils.toBN(2);\n\t\t\t\tconst temp = celo.kit.web3.utils\n\t\t\t\t\t.toBN(celo.kit.web3.utils.toWei(_amount0 || '0'))\n\t\t\t\t\t.mul(celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(_amount1 || '0')));\n\t\t\t\tlet z = temp.add(ONE).div(TWO);\n\t\t\t\tlet sqrt = temp;\n\t\t\t\twhile (z.sub(sqrt).isNeg()) {\n\t\t\t\t\tsqrt = z;\n\t\t\t\t\tz = temp.div(z).add(z).div(TWO);\n\t\t\t\t}\n\t\t\t\tsetAmount2(celo.kit.web3.utils.fromWei(sqrt));\n\t\t\t} else if (pair.reserves && pair.tokens) {\n\t\t\t\tconst reserve0 = pair.tokens[0] === token0.address ? pair.reserves[0] : pair.reserves[1];\n\t\t\t\tconst reserve1 = pair.tokens[1] === token1.address ? pair.reserves[1] : pair.reserves[0];\n\t\t\t\tconst a0 = celo.kit.web3.utils\n\t\t\t\t\t.toBN(celo.kit.web3.utils.toWei(_amount0 || '0'))\n\t\t\t\t\t.mul(total)\n\t\t\t\t\t.div(celo.kit.web3.utils.toBN(reserve0));\n\t\t\t\tconst a1 = celo.kit.web3.utils\n\t\t\t\t\t.toBN(celo.kit.web3.utils.toWei(_amount1 || '0'))\n\t\t\t\t\t.mul(total)\n\t\t\t\t\t.div(celo.kit.web3.utils.toBN(reserve1));\n\t\t\t\tsetAmount2(a0.lte(a1) ? celo.kit.web3.utils.fromWei(a0) : celo.kit.web3.utils.fromWei(a1));\n\t\t\t} else {\n\t\t\t\tsetAmount2('');\n\t\t\t}\n\t\t} else {\n\t\t\tsetAmount2('');\n\t\t}\n\t}\n\n\tfunction getDeadline() {\n\t\treturn Math.floor(new Date().getTime() / 1000) + parseInt(settings.deadline.value, 10) * 60;\n\t}\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst delayedQuery = React.useCallback(debounce(estimate, 300), [pair, amount0, amount1]);\n\n\tasync function estimate(_amount0: string, _amount1: string) {\n\t\tif (pair.tokens && isConnected) {\n\t\t\ttry {\n\t\t\t\tconst deadline = getDeadline();\n\t\t\t\tconst mintAmounts =\n\t\t\t\t\tpair.tokens[0] === token0.address\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toWei(_amount0 || '0').toString(),\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toWei(_amount1 || '0').toString(),\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: [\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toWei(_amount1 || '0').toString(),\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toWei(_amount0 || '0').toString(),\n\t\t\t\t\t\t  ];\n\t\t\t\tconst gas = await exchange.methods\n\t\t\t\t\t.liquidityAdd(pair.tokens, mintAmounts, deadline)\n\t\t\t\t\t.estimateGas({ from: account });\n\t\t\t\tsetSuccess(`Fee : ${estimateFee(gas)}`);\n\t\t\t\tsetError('');\n\t\t\t} catch (err) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(new Error(err));\n\t\t\t\tsetError(err.message ? err.message : err.Error.toString());\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onMint() {\n\t\tif (pair.tokens) {\n\t\t\tconst deadline = getDeadline();\n\t\t\tconst mintAmounts =\n\t\t\t\tpair.tokens[0] === token0.address\n\t\t\t\t\t? [celo.kit.web3.utils.toWei(amount0 || '0').toString(), celo.kit.web3.utils.toWei(amount1 || '0').toString()]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\tcelo.kit.web3.utils.toWei(amount1 || '0').toString(),\n\t\t\t\t\t\t\tcelo.kit.web3.utils.toWei(amount0 || '0').toString(),\n\t\t\t\t\t  ];\n\t\t\topenTxModal({\n\t\t\t\ttitle: 'Mint',\n\t\t\t\tceloTx: {\n\t\t\t\t\tfrom: account,\n\t\t\t\t\tto: exchange.options.address,\n\t\t\t\t\tdata: exchange.methods.liquidityAdd(pair.tokens, mintAmounts, deadline).encodeABI(),\n\t\t\t\t},\n\t\t\t\tcallback: () => {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log('Mint 1');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"DexfairLiquidityAdd\">\n\t\t\t<FormTokenPair\n\t\t\t\ttokenList={tokens[network].list}\n\t\t\t\tslot0={{\n\t\t\t\t\ttoken: token0,\n\t\t\t\t\tenable: celo.kit.web3.utils.isAddress(pair.adr) && pair.adr !== '0x0000000000000000000000000000000000000000',\n\t\t\t\t\tamount: amount0,\n\t\t\t\t\ttext: text0,\n\t\t\t\t\tsuccess: '',\n\t\t\t\t\terror: '',\n\t\t\t\t}}\n\t\t\t\tslot1={{\n\t\t\t\t\ttoken: token1,\n\t\t\t\t\tenable: celo.kit.web3.utils.isAddress(pair.adr) && pair.adr !== '0x0000000000000000000000000000000000000000',\n\t\t\t\t\tamount: amount1,\n\t\t\t\t\ttext: text1,\n\t\t\t\t\tsuccess: '',\n\t\t\t\t\terror: '',\n\t\t\t\t}}\n\t\t\t\tgetAllowance={getAllowance}\n\t\t\t\tsetApprove={setApprove}\n\t\t\t\tupdateAmount={(slot: number, amount: string) => {\n\t\t\t\t\tswitch (slot) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tsetAmount0(amount);\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tpair.total &&\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.total)).gt(celo.kit.web3.utils.toBN('0'))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetAmount1(getAmount1(amount));\n\t\t\t\t\t\t\t\tcalcLp(amount, getAmount1(amount));\n\t\t\t\t\t\t\t\tdelayedQuery(amount, getAmount1(amount));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcalcLp(amount, amount1);\n\t\t\t\t\t\t\t\tdelayedQuery(amount, amount1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tsetAmount1(amount);\n\t\t\t\t\t\t\tcalcLp(amount0, amount);\n\t\t\t\t\t\t\tdelayedQuery(amount0, amount);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tchangeToken={(slot: number, token: Token) => {\n\t\t\t\t\tsetAmount2('');\n\t\t\t\t\tchangeToken(slot, token);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Form.Group>\n\t\t\t\t<Form.Text>Liquidity</Form.Text>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<Form.Control readOnly disabled placeholder=\"0.0\" type=\"number\" value={amount2} />\n\t\t\t\t\t<InputGroup.Append>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={!isConnected || error !== '' || success === '' || amount0 === '' || amount1 === ''}\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tonClick={onMint}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tMint\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</InputGroup.Append>\n\t\t\t\t</InputGroup>\n\t\t\t\t<Form.Text className=\"text-muted\" hidden={success !== '' || error !== ''}>\n\t\t\t\t\t{account ? `Balance : ${pair.balance}` : ''}\n\t\t\t\t</Form.Text>\n\t\t\t\t<Form.Text className=\"text-danger\">{error}</Form.Text>\n\t\t\t\t<Form.Text className=\"text-success\" hidden={error !== ''}>\n\t\t\t\t\t{success}&nbsp;\n\t\t\t\t</Form.Text>\n\t\t\t</Form.Group>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(DexfairLiquidityAdd);\n","import React from 'react';\nimport { InputGroup, Form, Button } from 'react-bootstrap';\nimport { debounce } from 'lodash';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, Dexfair, Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport FormTokenPair from './FormTokenPair';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tsettings: Settings;\n\ttokens: TokenStore;\n\tcontract: Dexfair;\n\ttoken0: Token;\n\ttoken1: Token;\n\tgetAllowance: (token: Token) => Promise<string>;\n\tsetApprove: (token: Token, callback: () => Promise<void>) => void;\n\tchangeToken: (slot: number, token: Token) => void;\n\tpair: {\n\t\tadr: string;\n\t\tnetProfitBurn?: string;\n\t\tnetProfitExchange?: string;\n\t\ttokens?: string[];\n\t\treserves?: string[];\n\t\tbalance?: string;\n\t\ttotal?: string;\n\t};\n\texchange: any;\n\testimateFee: (gas: number) => string;\n\topenTxModal: (txData: TxData) => void;\n}\n\nconst DexfairLiquidityRemove: React.FunctionComponent<Props> = (props) => {\n\tconst [amount0, setAmount0] = React.useState<string>('');\n\tconst [amount1, setAmount1] = React.useState<string>('');\n\tconst [amount2, setAmount2] = React.useState<string>('');\n\n\tconst [text0, setText0] = React.useState<string>('');\n\tconst [text1, setText1] = React.useState<string>('');\n\tconst [success, setSuccess] = React.useState<string>('');\n\tconst [error, setError] = React.useState<string>('');\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\taccount,\n\t\tsettings,\n\t\ttokens,\n\t\ttoken0,\n\t\ttoken1,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\tchangeToken,\n\t\tpair,\n\t\texchange,\n\t\testimateFee,\n\t\topenTxModal,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tsetAmount0('');\n\t\tsetAmount1('');\n\t\tsetText0(updateBalance(tokens[network].balance[token0.address]));\n\t\tsetText1(updateBalance(tokens[network].balance[token1.address]));\n\t\tsetError('');\n\t\tsetSuccess('');\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, token0, token1, pair, tokens, account]);\n\n\tfunction updateBalance(balance: string | null | undefined) {\n\t\treturn balance && account ? `Balance : ${celo.kit.web3.utils.fromWei(balance)}` : '';\n\t}\n\n\tfunction getDeadline() {\n\t\treturn Math.floor(new Date().getTime() / 1000) + parseInt(settings.deadline.value, 10) * 60;\n\t}\n\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tconst delayedQuery = React.useCallback(debounce(estimate, 300), [pair, amount2]);\n\n\tasync function estimate(amount: string) {\n\t\tif (pair.tokens && isConnected) {\n\t\t\ttry {\n\t\t\t\tconst deadline = getDeadline();\n\t\t\t\tconst burnAmount = celo.kit.web3.utils.toWei(amount).toString();\n\t\t\t\tconst gas = await exchange.methods\n\t\t\t\t\t.liquidityRemove(pair.tokens, burnAmount, deadline)\n\t\t\t\t\t.estimateGas({ from: account });\n\t\t\t\tsetSuccess(`Fee : ${estimateFee(gas)}`);\n\t\t\t\tsetError('');\n\t\t\t} catch (err) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(new Error(err));\n\t\t\t\tsetError(err.message ? err.message : err.Error.toString());\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onBurn() {\n\t\tconst deadline = getDeadline();\n\t\tconst burnAmount = celo.kit.web3.utils.toWei(amount2).toString();\n\t\topenTxModal({\n\t\t\ttitle: 'Burn',\n\t\t\tceloTx: {\n\t\t\t\tfrom: account,\n\t\t\t\tto: exchange.options.address,\n\t\t\t\tdata: exchange.methods.liquidityRemove(pair.tokens, burnAmount, deadline).encodeABI(),\n\t\t\t},\n\t\t\tcallback: () => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log('Burn 1');\n\t\t\t},\n\t\t});\n\t}\n\n\treturn (\n\t\t<div className=\"DexfairLiquidityRemove\">\n\t\t\t<FormTokenPair\n\t\t\t\ttokenList={tokens[network].list}\n\t\t\t\tslot0={{\n\t\t\t\t\ttoken: token0,\n\t\t\t\t\tenable: celo.kit.web3.utils.isAddress(pair.adr) && pair.adr !== '0x0000000000000000000000000000000000000000',\n\t\t\t\t\tamount: amount0,\n\t\t\t\t\ttext: text0,\n\t\t\t\t\tsuccess: '',\n\t\t\t\t\terror: '',\n\t\t\t\t}}\n\t\t\t\tslot1={{\n\t\t\t\t\ttoken: token1,\n\t\t\t\t\tenable: celo.kit.web3.utils.isAddress(pair.adr) && pair.adr !== '0x0000000000000000000000000000000000000000',\n\t\t\t\t\tamount: amount1,\n\t\t\t\t\ttext: text1,\n\t\t\t\t\tsuccess: '',\n\t\t\t\t\terror: '',\n\t\t\t\t}}\n\t\t\t\tgetAllowance={getAllowance}\n\t\t\t\tsetApprove={setApprove}\n\t\t\t\tupdateAmount={(slot: number, amount: string) => {\n\t\t\t\t\tswitch (slot) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tsetAmount0(amount);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tsetAmount1(amount);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tchangeToken={(slot: number, token: Token) => {\n\t\t\t\t\tsetAmount2('');\n\t\t\t\t\tchangeToken(slot, token);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Form.Group>\n\t\t\t\t<Form.Text>Liquidity</Form.Text>\n\t\t\t\t<InputGroup>\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\treadOnly={!isConnected}\n\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t!isConnected ||\n\t\t\t\t\t\t\tcelo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.balance || '0')).eq(celo.kit.web3.utils.toBN('0'))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tplaceholder=\"0.0\"\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tvalue={amount2}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetAmount2(e.target.value);\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\te.target.value &&\n\t\t\t\t\t\t\t\tpair.total &&\n\t\t\t\t\t\t\t\tpair.balance &&\n\t\t\t\t\t\t\t\tpair.tokens &&\n\t\t\t\t\t\t\t\tpair.reserves &&\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.total)).gt(celo.kit.web3.utils.toBN('0')) &&\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.balance)).gt(celo.kit.web3.utils.toBN('0'))\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst total = celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.total));\n\t\t\t\t\t\t\t\tconst balance = celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(pair.balance));\n\t\t\t\t\t\t\t\tconst burn = celo.kit.web3.utils.toBN(celo.kit.web3.utils.toWei(e.target.value));\n\t\t\t\t\t\t\t\tconst temp0 = celo.kit.web3.utils.fromWei(\n\t\t\t\t\t\t\t\t\tcelo.kit.web3.utils\n\t\t\t\t\t\t\t\t\t\t.toBN(pair.reserves[0])\n\t\t\t\t\t\t\t\t\t\t.mul(burn.lte(balance) ? burn : balance)\n\t\t\t\t\t\t\t\t\t\t.div(total)\n\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tconst temp1 = celo.kit.web3.utils.fromWei(\n\t\t\t\t\t\t\t\t\tcelo.kit.web3.utils\n\t\t\t\t\t\t\t\t\t\t.toBN(pair.reserves[1])\n\t\t\t\t\t\t\t\t\t\t.mul(burn.lte(balance) ? burn : balance)\n\t\t\t\t\t\t\t\t\t\t.div(total)\n\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (token0.address === pair.tokens[0]) {\n\t\t\t\t\t\t\t\t\tsetAmount0(temp0);\n\t\t\t\t\t\t\t\t\tsetAmount1(temp1);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetAmount0(temp1);\n\t\t\t\t\t\t\t\t\tsetAmount1(temp0);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdelayedQuery(e.target.value);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetAmount0('');\n\t\t\t\t\t\t\t\tsetAmount1('');\n\t\t\t\t\t\t\t\tsetSuccess('');\n\t\t\t\t\t\t\t\tsetError('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<InputGroup.Append>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={\n\t\t\t\t\t\t\t\t!isConnected ||\n\t\t\t\t\t\t\t\tamount2 === '' ||\n\t\t\t\t\t\t\t\tcelo.kit.web3.utils\n\t\t\t\t\t\t\t\t\t.toBN(celo.kit.web3.utils.toWei(pair.balance || '0'))\n\t\t\t\t\t\t\t\t\t.eq(celo.kit.web3.utils.toBN('0'))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\tonClick={onBurn}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tBurn\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</InputGroup.Append>\n\t\t\t\t</InputGroup>\n\t\t\t\t<Form.Text className=\"text-muted\" hidden={success !== '' || error !== ''}>\n\t\t\t\t\t{account ? `Balance : ${pair.balance}` : ''}\n\t\t\t\t</Form.Text>\n\t\t\t\t<Form.Text className=\"text-danger\">{error}</Form.Text>\n\t\t\t\t<Form.Text className=\"text-success\" hidden={error !== ''}>\n\t\t\t\t\t{success}&nbsp;\n\t\t\t\t</Form.Text>\n\t\t\t</Form.Group>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(DexfairLiquidityRemove);\n","import React from 'react';\nimport { Tab, Row, Col, Nav } from 'react-bootstrap';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Token, TokenStore, Dexfair, Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport DexfairLiquidityStatus from './DexfairLiquidityStatus';\nimport DexfairLiquidityMint from './DexfairLiquidityMint';\nimport DexfairLiquidityBurn from './DexfairLiquidityBurn';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tsettings: Settings;\n\ttokens: TokenStore;\n\tcontract: Dexfair;\n\thidden: boolean;\n\tgetAllowance: (addrContract: string, addrToken: string) => Promise<string>;\n\tsetApprove: (addrContract: string, addrToken: string, callback: () => Promise<void>) => void;\n\testimateFee: (gas: number) => string;\n\topenTxModal: (txData: TxData) => void;\n}\n\nconst DexfairLiquidity: React.FunctionComponent<Props> = (props) => {\n\tconst [token0, setToken0] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\tconst [token1, setToken1] = React.useState<Token>({ icon: '', symbol: '', address: '' });\n\n\tconst [key, setKey] = React.useState<string | null>('status');\n\n\tconst [exchange, setExchange] = React.useState<any>(null);\n\tconst [pair, setPair] = React.useState<{\n\t\tadr: string;\n\t\tnetProfitBurn?: string;\n\t\tnetProfitExchange?: string;\n\t\ttokens?: string[];\n\t\treserves?: string[];\n\t\tbalance?: string;\n\t\ttotal?: string;\n\t}>({ adr: '' });\n\n\tconst {\n\t\tcelo,\n\t\tnetwork,\n\t\tisConnected,\n\t\taccount,\n\t\ttokens,\n\t\tcontract,\n\t\thidden,\n\t\tgetAllowance,\n\t\tsetApprove,\n\t\testimateFee,\n\t\topenTxModal,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\tif (tokens[network].list.length > 1) {\n\t\t\tconst address = contract.address[network];\n\t\t\tif (!exchange && address) {\n\t\t\t\tconst temp = new celo.kit.web3.eth.Contract(contract.abi, address);\n\t\t\t\tsetExchange(temp);\n\t\t\t} else if (exchange) {\n\t\t\t\tsetToken0(tokens[network].list[0]);\n\t\t\t\tsetToken1(tokens[network].list[1]);\n\t\t\t\tupdatePair(tokens[network].list[0], tokens[network].list[1]);\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network, tokens, exchange, account]);\n\n\tasync function updatePair(tokenA: Token, tokenB: Token) {\n\t\tif (exchange) {\n\t\t\tconst pairStatus = await exchange.methods.getPair([tokenA.address, tokenB.address]).call();\n\t\t\tconst total = await celo.kit.web3.eth.call({\n\t\t\t\tto: pairStatus.adr,\n\t\t\t\tdata: celo.contracts.erc20.methods.totalSupply().encodeABI(),\n\t\t\t});\n\t\t\tif (account) {\n\t\t\t\tconst balance = await celo.kit.web3.eth.call({\n\t\t\t\t\tto: pairStatus.adr,\n\t\t\t\t\tdata: celo.contracts.erc20.methods.balanceOf(account).encodeABI(),\n\t\t\t\t});\n\t\t\t\tif (balance !== '0x') {\n\t\t\t\t\tsetPair({\n\t\t\t\t\t\t...pairStatus,\n\t\t\t\t\t\tbalance: celo.kit.web3.utils.fromWei(celo.kit.web3.eth.abi.decodeParameter('uint256', balance).toString()),\n\t\t\t\t\t\ttotal: celo.kit.web3.utils.fromWei(celo.kit.web3.eth.abi.decodeParameter('uint256', total).toString()),\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsetPair({ adr: '' });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetPair({\n\t\t\t\t\t...pairStatus,\n\t\t\t\t\ttotal: celo.kit.web3.utils.fromWei(celo.kit.web3.eth.abi.decodeParameter('uint256', total).toString()),\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tsetPair({ adr: '' });\n\t\t}\n\t}\n\n\tfunction createPair(callback: () => void) {\n\t\topenTxModal({\n\t\t\ttitle: 'Create Pair',\n\t\t\tceloTx: {\n\t\t\t\tfrom: account,\n\t\t\t\tto: exchange.options.address,\n\t\t\t\tdata: exchange.methods.register([token0.address, token1.address]).encodeABI(),\n\t\t\t},\n\t\t\tcallback,\n\t\t});\n\t}\n\n\tfunction changeToken(slot: number, token: Token) {\n\t\tswitch (slot) {\n\t\t\tcase 0:\n\t\t\t\tif (token1.address === token.address) {\n\t\t\t\t\tsetToken1(token0);\n\t\t\t\t\tsetToken0(token);\n\t\t\t\t} else {\n\t\t\t\t\tsetToken0(token);\n\t\t\t\t\tupdatePair(token, token1);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tsetToken1(token);\n\t\t\t\tif (token0.address === token.address) {\n\t\t\t\t\tsetToken0(token1);\n\t\t\t\t\tsetToken1(token);\n\t\t\t\t} else {\n\t\t\t\t\tsetToken1(token);\n\t\t\t\t\tupdatePair(token0, token);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn (\n\t\t<div className=\"DexfairLiquidity\" hidden={hidden}>\n\t\t\t<Tab.Container defaultActiveKey={key}>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col sm={2}>\n\t\t\t\t\t\t<Nav variant=\"pills\" className=\"flex-column\">\n\t\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"status\" className=\"text-center\" onSelect={(k) => setKey(k)}>\n\t\t\t\t\t\t\t\t\tStatus\n\t\t\t\t\t\t\t\t</Nav.Link>\n\t\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"mint\" className=\"text-center\" onSelect={(k) => setKey(k)} disabled={!isConnected}>\n\t\t\t\t\t\t\t\t\tMint\n\t\t\t\t\t\t\t\t</Nav.Link>\n\t\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t\t<Nav.Item>\n\t\t\t\t\t\t\t\t<Nav.Link eventKey=\"burn\" className=\"text-center\" onSelect={(k) => setKey(k)} disabled={!isConnected}>\n\t\t\t\t\t\t\t\t\tBurn\n\t\t\t\t\t\t\t\t</Nav.Link>\n\t\t\t\t\t\t\t</Nav.Item>\n\t\t\t\t\t\t</Nav>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col sm={10}>\n\t\t\t\t\t\t<Tab.Content>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"status\">\n\t\t\t\t\t\t\t\t<DexfairLiquidityStatus\n\t\t\t\t\t\t\t\t\ttoken0={token0}\n\t\t\t\t\t\t\t\t\ttoken1={token1}\n\t\t\t\t\t\t\t\t\tgetAllowance={async (token: Token) => {\n\t\t\t\t\t\t\t\t\t\tconst result = await getAllowance(exchange.options.address, token.address);\n\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsetApprove={(token: Token, callback) => {\n\t\t\t\t\t\t\t\t\t\tsetApprove(exchange.options.address, token.address, callback);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tchangeToken={changeToken}\n\t\t\t\t\t\t\t\t\tcreatePair={createPair}\n\t\t\t\t\t\t\t\t\tpair={pair}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"mint\">\n\t\t\t\t\t\t\t\t<DexfairLiquidityMint\n\t\t\t\t\t\t\t\t\ttoken0={token0}\n\t\t\t\t\t\t\t\t\ttoken1={token1}\n\t\t\t\t\t\t\t\t\tgetAllowance={async (token: Token) => {\n\t\t\t\t\t\t\t\t\t\tconst result = await getAllowance(exchange.options.address, token.address);\n\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsetApprove={(token: Token, callback) => {\n\t\t\t\t\t\t\t\t\t\tsetApprove(exchange.options.address, token.address, callback);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tchangeToken={changeToken}\n\t\t\t\t\t\t\t\t\tpair={pair}\n\t\t\t\t\t\t\t\t\texchange={exchange}\n\t\t\t\t\t\t\t\t\testimateFee={estimateFee}\n\t\t\t\t\t\t\t\t\topenTxModal={openTxModal}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t\t<Tab.Pane eventKey=\"burn\">\n\t\t\t\t\t\t\t\t<DexfairLiquidityBurn\n\t\t\t\t\t\t\t\t\ttoken0={token0}\n\t\t\t\t\t\t\t\t\ttoken1={token1}\n\t\t\t\t\t\t\t\t\tgetAllowance={async (token: Token) => {\n\t\t\t\t\t\t\t\t\t\tconst result = await getAllowance(exchange.options.address, token.address);\n\t\t\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsetApprove={(token: Token, callback) => {\n\t\t\t\t\t\t\t\t\t\tsetApprove(exchange.options.address, token.address, callback);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tchangeToken={changeToken}\n\t\t\t\t\t\t\t\t\tpair={pair}\n\t\t\t\t\t\t\t\t\texchange={exchange}\n\t\t\t\t\t\t\t\t\testimateFee={estimateFee}\n\t\t\t\t\t\t\t\t\topenTxModal={openTxModal}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Tab.Pane>\n\t\t\t\t\t\t</Tab.Content>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Tab.Container>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(DexfairLiquidity);\n","import React from 'react';\nimport { Card, Container, Tabs, Tab } from 'react-bootstrap';\nimport { CSSTransition } from 'react-transition-group';\nimport { Celo } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Dexfair, actionCreators as storeActions } from '../store/modules/dexfair';\n\nimport { TxData } from './Types';\nimport ModalSndTx from './ModalSndTx';\nimport Transfer from './Transfer';\nimport Exchange from './Exchange';\nimport DexfairExchange from './DexfairExchange';\nimport DexfairLiquidity from './DexfairLiquidity';\nimport '../animation.css';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\taccount: string;\n\tisConnected: boolean;\n\tcontract: Dexfair;\n\tupdataMainBalance: (address: string) => Promise<void>;\n}\n\nconst Board: React.FunctionComponent<Props> = (props) => {\n\tconst [key, setKey] = React.useState<string | null>('transfer');\n\tconst [gasPrice, setGasPrice] = React.useState<string>('');\n\tconst [modalShow, setModalShow] = React.useState<boolean>(false);\n\tconst [txData, setTxData] = React.useState<TxData>({ title: '' });\n\n\tconst { celo, network, account, contract, updataMainBalance } = props;\n\n\tReact.useEffect(() => {\n\t\tasync function init() {\n\t\t\tconst price = await celo.kit.web3.eth.getGasPrice();\n\t\t\tsetGasPrice(price);\n\t\t}\n\t\tinit();\n\t\tsetKey('transfer');\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [network]);\n\n\tasync function getAllowance(addrContract: string, addrToken: string): Promise<string> {\n\t\tif (celo.kit.web3.utils.isAddress(account) && addrContract) {\n\t\t\tconst amount = await celo.kit.web3.eth.call({\n\t\t\t\tto: addrToken,\n\t\t\t\tdata: celo.contracts.erc20.methods.allowance(account, addrContract).encodeABI(),\n\t\t\t});\n\t\t\treturn amount;\n\t\t}\n\t\treturn '0';\n\t}\n\n\tfunction setApprove(addrContract: string, addrToken: string, callback: () => void) {\n\t\tif (celo.kit.web3.utils.isAddress(account) && addrContract) {\n\t\t\tconst MAX = celo.kit.web3.utils.hexToNumberString(\n\t\t\t\t'0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff'\n\t\t\t);\n\t\t\topenTxModal({\n\t\t\t\ttitle: 'Approve',\n\t\t\t\tceloTx: {\n\t\t\t\t\tfrom: account,\n\t\t\t\t\tto: addrToken,\n\t\t\t\t\tdata: celo.contracts.erc20.methods.approve(addrContract, MAX).encodeABI(),\n\t\t\t\t},\n\t\t\t\tcallback,\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction estimateFee(gas: number): string {\n\t\treturn celo.kit.web3.utils.fromWei(\n\t\t\tcelo.kit.web3.utils\n\t\t\t\t.toBN(Math.round(gas * celo.kit.connection.defaultGasInflationFactor))\n\t\t\t\t.mul(celo.kit.web3.utils.toBN(gasPrice))\n\t\t);\n\t}\n\n\tfunction openTxModal(data: TxData) {\n\t\tsetTxData(data);\n\t\tsetModalShow(true);\n\t}\n\n\treturn (\n\t\t<Container className=\"my-5\">\n\t\t\t<Card>\n\t\t\t\t<Card.Header>\n\t\t\t\t\t<div hidden={!!contract.address[network]}>\n\t\t\t\t\t\t<Tabs activeKey={key} onSelect={(k) => setKey(k)}>\n\t\t\t\t\t\t\t<Tab eventKey=\"transfer\" title=\"Transfer\" />\n\t\t\t\t\t\t\t<Tab eventKey=\"exchange\" title=\"Exchange\" />\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div hidden={!contract.address[network]}>\n\t\t\t\t\t\t<Tabs activeKey={key} onSelect={(k) => setKey(k)}>\n\t\t\t\t\t\t\t<Tab eventKey=\"transfer\" title=\"Transfer\" />\n\t\t\t\t\t\t\t<Tab eventKey=\"exchange\" title=\"Exchange\" />\n\t\t\t\t\t\t\t<Tab eventKey=\"dexfair\" title=\"Dexfair\" />\n\t\t\t\t\t\t\t<Tab eventKey=\"liquidity\" title=\"Liquidity\" />\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</div>\n\t\t\t\t</Card.Header>\n\t\t\t\t<Card.Body>\n\t\t\t\t\t<CSSTransition in={key === 'transfer'} timeout={400} classNames=\"fade\" unmountOnExit>\n\t\t\t\t\t\t<Transfer hidden={key !== 'transfer'} estimateFee={estimateFee} openTxModal={openTxModal} />\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t<CSSTransition in={key === 'exchange'} timeout={400} classNames=\"fade\" unmountOnExit>\n\t\t\t\t\t\t<Exchange\n\t\t\t\t\t\t\thidden={key !== 'exchange'}\n\t\t\t\t\t\t\tgetAllowance={getAllowance}\n\t\t\t\t\t\t\tsetApprove={setApprove}\n\t\t\t\t\t\t\testimateFee={estimateFee}\n\t\t\t\t\t\t\topenTxModal={openTxModal}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t<CSSTransition in={key === 'dexfair'} timeout={400} classNames=\"fade\" unmountOnExit>\n\t\t\t\t\t\t<DexfairExchange\n\t\t\t\t\t\t\thidden={key !== 'dexfair' || !contract.address[network]}\n\t\t\t\t\t\t\tgetAllowance={getAllowance}\n\t\t\t\t\t\t\tsetApprove={setApprove}\n\t\t\t\t\t\t\testimateFee={estimateFee}\n\t\t\t\t\t\t\topenTxModal={openTxModal}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t\t<CSSTransition in={key === 'liquidity'} timeout={400} classNames=\"fade\" unmountOnExit>\n\t\t\t\t\t\t<DexfairLiquidity\n\t\t\t\t\t\t\thidden={key !== 'liquidity' || !contract.address[network]}\n\t\t\t\t\t\t\tgetAllowance={getAllowance}\n\t\t\t\t\t\t\tsetApprove={setApprove}\n\t\t\t\t\t\t\testimateFee={estimateFee}\n\t\t\t\t\t\t\topenTxModal={openTxModal}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t</Card.Body>\n\t\t\t</Card>\n\t\t\t<ModalSndTx\n\t\t\t\tcelo={celo}\n\t\t\t\tshow={modalShow}\n\t\t\t\ttxData={txData}\n\t\t\t\tupdataMainBalance={updataMainBalance}\n\t\t\t\tonHide={() => {\n\t\t\t\t\tsetModalShow(false);\n\t\t\t\t\tsetTxData({ title: '' });\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(Board);\n","import React from 'react';\nimport { Button, Modal, Form, InputGroup } from 'react-bootstrap';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from '../store/modules';\nimport { Settings, actionCreators as storeActions } from '../store/modules/dexfair';\n\ninterface Props {\n\tsettings: Settings;\n\tshow: boolean;\n\tonHide: () => void;\n\tStoreActions: typeof storeActions;\n}\n\nconst ModalSettings: React.FunctionComponent<Props> = (props) => {\n\tconst [header, setHeader] = React.useState<string>('');\n\tconst [slippage, setSlippage] = React.useState<string>('');\n\tconst [deadline, setDeadline] = React.useState<string>('');\n\n\tconst { settings, show, onHide, StoreActions } = props;\n\n\tReact.useEffect(() => {\n\t\tsetSlippage(settings.slippage.value);\n\t\tsetDeadline(settings.deadline.value);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [show]);\n\n\treturn (\n\t\t<div className=\"ModalSettings\">\n\t\t\t<Modal show={show} onHide={onHide} aria-labelledby=\"contained-modal-title-vcenter\" backdrop=\"static\" centered>\n\t\t\t\t<Modal.Header closeButton className={header}>\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">Settings</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t<Form.Text>{settings.slippage.name}</Form.Text>\n\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"string\"\n\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\tvalue={slippage}\n\t\t\t\t\t\t\t\tisInvalid={parseInt(slippage, 10) < 50 || parseInt(slippage, 10) > 100}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst value = parseInt(e.target.value, 10);\n\t\t\t\t\t\t\t\t\tsetSlippage(e.target.value);\n\t\t\t\t\t\t\t\t\tif (value >= 50 && value <= 100) {\n\t\t\t\t\t\t\t\t\t\tStoreActions.dexfairSetting('slippage', e.target.value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InputGroup.Append>\n\t\t\t\t\t\t\t\t<InputGroup.Text>{settings.slippage.unit}</InputGroup.Text>\n\t\t\t\t\t\t\t</InputGroup.Append>\n\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t<Form.Text className=\"text-muted\">{settings.slippage.desc}</Form.Text>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t<Form.Text>{settings.deadline.name}</Form.Text>\n\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\ttype=\"string\"\n\t\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t\tvalue={deadline}\n\t\t\t\t\t\t\t\tisInvalid={parseInt(deadline, 10) < 5 || parseInt(deadline, 10) > 60}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tconst value = parseInt(e.target.value, 10);\n\t\t\t\t\t\t\t\t\tsetDeadline(e.target.value);\n\t\t\t\t\t\t\t\t\tif (value >= 50 && value <= 100) {\n\t\t\t\t\t\t\t\t\t\tStoreActions.dexfairSetting('deadline', e.target.value);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<InputGroup.Append>\n\t\t\t\t\t\t\t\t<InputGroup.Text>{settings.deadline.unit}</InputGroup.Text>\n\t\t\t\t\t\t\t</InputGroup.Append>\n\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t<Form.Text className=\"text-muted\">{settings.deadline.desc}</Form.Text>\n\t\t\t\t\t</Form.Group>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button onClick={onHide}>Close</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(ModalSettings);\n","import React from 'react';\nimport { Button, Modal, Form, InputGroup } from 'react-bootstrap';\nimport { Celo } from '@dexfair/celo-web-signer';\nimport { Token, TokenStore } from '../store/modules/dexfair';\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\ttokens: TokenStore;\n\tinsertToken: (token: Token) => void;\n\tshow: boolean;\n\tonHide: () => void;\n}\n\nconst ModalAddToken: React.FunctionComponent<Props> = (props) => {\n\tconst [header, setHeader] = React.useState<string>('');\n\tconst [address, setAddress] = React.useState<string>('');\n\tconst [busy, setBusy] = React.useState<boolean>(false);\n\tconst [success, setSuccess] = React.useState<boolean>(false);\n\tconst [token, setToken] = React.useState<Token>({ icon: '', address: '', symbol: '', name: '' });\n\n\tconst { celo, network, tokens, insertToken, show, onHide } = props;\n\n\tReact.useEffect(() => {\n\t\tsetSuccess(false);\n\t\tsetAddress('');\n\t\tsetToken({ icon: '', address: '', symbol: '', name: '' });\n\t}, [show]);\n\n\treturn (\n\t\t<div className=\"ModalAddToken\">\n\t\t\t<Modal show={show} onHide={onHide} aria-labelledby=\"contained-modal-title-vcenter\" backdrop=\"static\" centered>\n\t\t\t\t<Modal.Header closeButton className={header}>\n\t\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">Add Token</Modal.Title>\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Body>\n\t\t\t\t\t<Form>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Text>Symbol</Form.Text>\n\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t<Form.Control readOnly type=\"string\" placeholder=\"\" value={token.symbol} />\n\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Text>Name</Form.Text>\n\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t<Form.Control readOnly type=\"string\" placeholder=\"\" value={token.name} />\n\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t\t<Form.Group>\n\t\t\t\t\t\t\t<Form.Text>Address</Form.Text>\n\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t<Form.Control\n\t\t\t\t\t\t\t\t\ttype=\"string\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"0x\"\n\t\t\t\t\t\t\t\t\tvalue={address}\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\t\tsetAddress(e.target.value);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<InputGroup.Append>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\thidden={!celo.kit.web3.utils.isAddress(address)}\n\t\t\t\t\t\t\t\t\t\tdisabled={busy}\n\t\t\t\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\t\t\t\tsetBusy(true);\n\t\t\t\t\t\t\t\t\t\t\tsetSuccess(false);\n\t\t\t\t\t\t\t\t\t\t\tconst symbol = await celo.kit.web3.eth.call({\n\t\t\t\t\t\t\t\t\t\t\t\tto: address,\n\t\t\t\t\t\t\t\t\t\t\t\tdata: celo.contracts.erc20.methods.symbol().encodeABI(),\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tif (symbol !== '0x') {\n\t\t\t\t\t\t\t\t\t\t\t\tconst name = await celo.kit.web3.eth.call({\n\t\t\t\t\t\t\t\t\t\t\t\t\tto: address,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: celo.contracts.erc20.methods.name().encodeABI(),\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tif (name !== '0x') {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSuccess(tokens[network].balance[token.address] === undefined);\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetToken({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ticon: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddress,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsymbol: `${celo.kit.web3.eth.abi.decodeParameter('string', symbol)}` || address,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: `${celo.kit.web3.eth.abi.decodeParameter('string', name)}`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsetBusy(false);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-search-plus\" />\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</InputGroup.Append>\n\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t</Form.Group>\n\t\t\t\t\t</Form>\n\t\t\t\t</Modal.Body>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (success) {\n\t\t\t\t\t\t\t\tif (tokens[network].balance[token.address] === undefined) {\n\t\t\t\t\t\t\t\t\tinsertToken(token);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonHide();\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{success ? 'Add & Close' : 'Close'}\n\t\t\t\t\t</Button>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n};\n\nexport default ModalAddToken;\n","import React from 'react';\nimport { Button, Card, Container, Navbar, Nav, NavDropdown, Form, Image, Row, Col, InputGroup } from 'react-bootstrap';\nimport { CSSTransition } from 'react-transition-group';\nimport { Celo, NETWORKS } from '@dexfair/celo-web-signer';\n\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { StoreState } from './store/modules';\nimport { Token, TokenStore, Dexfair, actionCreators as storeActions } from './store/modules/dexfair';\n\nimport './animation.css';\nimport Board from './components/Board';\nimport ModalSettings from './components/ModalSettings';\nimport ModalAddToken from './components/ModalAddToken';\n\nconst CONNECTS: { [key: string]: { icon: string; name: string } } = {\n\tusb: { icon: './ledger-512.png', name: 'Ledger USB' },\n\tble: { icon: './ledger-512.png', name: 'Ledger BLE' },\n\tcelo: { icon: './celo-512.png', name: 'Celo' },\n\tmetamask: { icon: './metamask-512.png', name: 'MetaMask' },\n};\n\nexport interface TokenConfig {\n\t[key: string]: Token[];\n}\n\ninterface Props {\n\tcelo: Celo;\n\tnetwork: string;\n\tisConnected: boolean;\n\taccount: string;\n\tcontract: Dexfair;\n\ttokens: TokenStore;\n\tStoreActions: typeof storeActions;\n}\n\nconst App: React.FunctionComponent<Props> = (props) => {\n\tconst [initDone, setInitDone] = React.useState<boolean>(false);\n\tconst [tokenJson, setTokenJson] = React.useState<TokenConfig>({});\n\tconst [support, setSupport] = React.useState<{ [key: string]: boolean }>({});\n\tconst [walletIcon, setWalletIcon] = React.useState<string>('...loading');\n\tconst [balance, setBalance] = React.useState<{ celo: string; cusd: string }>({ celo: '', cusd: '' });\n\tconst [showSettings, setShowSettings] = React.useState<boolean>(false);\n\tconst [showAddToken, setShowAddToken] = React.useState<boolean>(false);\n\n\tconst { celo, network, isConnected, account, contract, tokens, StoreActions } = props;\n\n\tReact.useEffect(() => {\n\t\tasync function init() {\n\t\t\tif (initDone) {\n\t\t\t\tawait updateTokenList(tokenJson, network);\n\t\t\t\tawait updataMainBalance(account);\n\t\t\t} else {\n\t\t\t\tsetSupport(await celo.getSupport());\n\t\t\t\tfetch('/dexfair/config.json')\n\t\t\t\t\t.then((respons) => respons.json())\n\t\t\t\t\t.then(async (config: Dexfair) => {\n\t\t\t\t\t\tStoreActions.dexfairUpdate(config);\n\t\t\t\t\t\tfetch('/dexfair/tokens.json')\n\t\t\t\t\t\t\t.then((respons) => respons.json())\n\t\t\t\t\t\t\t.then(async (result: TokenConfig) => {\n\t\t\t\t\t\t\t\tawait updateTokenList(result, network);\n\t\t\t\t\t\t\t\tsetInitDone(true);\n\t\t\t\t\t\t\t\tsetTokenJson(result);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tinit();\n\t\t// eslint-disable-next-line\n\t}, [network]);\n\n\tasync function login(wallet: string) {\n\t\ttry {\n\t\t\tlet result = false;\n\t\t\tswitch (wallet) {\n\t\t\t\tcase 'metamask':\n\t\t\t\t\tresult = await celo.connectMetaMask(async (accounts: string[]) => {\n\t\t\t\t\t\tsetWalletIcon(CONNECTS.metamask.icon);\n\t\t\t\t\t\tStoreActions.accountUpdate(accounts[0]);\n\t\t\t\t\t\tawait updataMainBalance(accounts[0]);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'usb':\n\t\t\t\t\tresult = await celo.connectLedgerUSB(async (accounts: string[]) => {\n\t\t\t\t\t\tsetWalletIcon(CONNECTS.usb.icon);\n\t\t\t\t\t\tStoreActions.accountUpdate(accounts[0]);\n\t\t\t\t\t\tawait updataMainBalance(accounts[0]);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ble':\n\t\t\t\t\tresult = await celo.connectLedgerBLE(async (accounts: string[]) => {\n\t\t\t\t\t\tsetWalletIcon(CONNECTS.ble.icon);\n\t\t\t\t\t\tStoreActions.accountUpdate(accounts[0]);\n\t\t\t\t\t\tawait updataMainBalance(accounts[0]);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcelo.disconnect();\n\t\t\t\t\tStoreActions.networkConnect(false);\n\t\t\t\t\tsetWalletIcon('');\n\t\t\t\t\tStoreActions.accountUpdate('');\n\t\t\t\t\tsetBalance({ celo: '', cusd: '' });\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tStoreActions.networkConnect(result);\n\t\t} catch (error) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(new Error(error));\n\t\t\tStoreActions.networkConnect(false);\n\t\t}\n\t}\n\n\tasync function changeNetwork(selectedNetwork: string) {\n\t\tif (selectedNetwork !== network) {\n\t\t\tconst temp = NETWORKS[selectedNetwork];\n\t\t\tStoreActions.networkUpdate(selectedNetwork);\n\t\t\tsetBalance({ celo: '...loading', cusd: '...loading' });\n\t\t\tawait celo.changeNetwork(temp);\n\t\t}\n\t}\n\n\tasync function updateTokenList(cfg: TokenConfig, selectedNetwork: string) {\n\t\tif (tokens[selectedNetwork] && tokens[selectedNetwork].list.length === 0) {\n\t\t\tconst gold = await celo.kit.contracts.getGoldToken();\n\t\t\tconst stable = await celo.kit.contracts.getStableToken();\n\t\t\tconst xgp = contract.address[selectedNetwork];\n\t\t\tStoreActions.tokenInsert(selectedNetwork, { icon: '/dexfair/celo.svg', symbol: 'Celo', address: gold.address });\n\t\t\tStoreActions.tokenInsert(selectedNetwork, { icon: '/dexfair/cusd.svg', symbol: 'cUsd', address: stable.address });\n\t\t\tif (xgp) {\n\t\t\t\tStoreActions.tokenInsert(selectedNetwork, { icon: '/dexfair/dexfair.png', symbol: 'XGP', address: xgp });\n\t\t\t}\n\t\t\tcfg[selectedNetwork].forEach((token) => {\n\t\t\t\tStoreActions.tokenInsert(selectedNetwork, token);\n\t\t\t});\n\t\t}\n\t}\n\n\tasync function updataMainBalance(address: string) {\n\t\tif (celo.kit.web3.utils.isAddress(address)) {\n\t\t\tsetBalance({ celo: '...loading', cusd: '...loading' });\n\t\t\tconst total = await celo.kit.getTotalBalance(address);\n\t\t\tif (tokens[network] && tokens[network].list.length > 1) {\n\t\t\t\tStoreActions.tokenUpdate(network, tokens[network].list[0].address, total.CELO.toString());\n\t\t\t\tStoreActions.tokenUpdate(network, tokens[network].list[1].address, total.cUSD.toString());\n\t\t\t}\n\t\t\tsetBalance({\n\t\t\t\tcelo: celo.kit.web3.utils.fromWei(total.CELO.toString()),\n\t\t\t\tcusd: celo.kit.web3.utils.fromWei(total.cUSD.toString()),\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction DrawNetwork() {\n\t\tconst items = Object.keys(NETWORKS).map((select: string, index: number) => (\n\t\t\t<NavDropdown.Item\n\t\t\t\tkey={`network_${index.toString()}`}\n\t\t\t\tvalue={select}\n\t\t\t\tonClick={async (e: any) => {\n\t\t\t\t\tawait changeNetwork(e.target.text);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{select}\n\t\t\t</NavDropdown.Item>\n\t\t));\n\t\tconst connects = Object.keys(support).map((wallet: string, index: number) => (\n\t\t\t<NavDropdown.Item\n\t\t\t\tkey={`connect_${index.toString()}`}\n\t\t\t\thidden={!support[wallet] || isConnected}\n\t\t\t\tonClick={async () => {\n\t\t\t\t\tawait login(wallet);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Image src={CONNECTS[wallet].icon} style={{ height: '18px' }} fluid />\n\t\t\t\t&nbsp;\n\t\t\t\t<span className=\"align-middle\">{CONNECTS[wallet].name}</span>\n\t\t\t</NavDropdown.Item>\n\t\t));\n\t\treturn (\n\t\t\t<NavDropdown title={network} id=\"collasible-nav-dropdown\">\n\t\t\t\t{items}\n\t\t\t\t<NavDropdown.Divider />\n\t\t\t\t{connects}\n\t\t\t\t<NavDropdown.Item\n\t\t\t\t\thidden={!isConnected}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetShowAddToken(true);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"align-middle\">\n\t\t\t\t\t\t<i className=\"fas fa-plus-square mr-2\" />\n\t\t\t\t\t\tAdd Token\n\t\t\t\t\t</span>\n\t\t\t\t</NavDropdown.Item>\n\t\t\t\t<NavDropdown.Item\n\t\t\t\t\thidden={!isConnected}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetShowSettings(true);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"align-middle\">\n\t\t\t\t\t\t<i className=\"fas fa-cog mr-2\" />\n\t\t\t\t\t\tSettings\n\t\t\t\t\t</span>\n\t\t\t\t</NavDropdown.Item>\n\t\t\t\t<NavDropdown.Divider hidden={!isConnected} />\n\t\t\t\t<NavDropdown.Item\n\t\t\t\t\thidden={!isConnected}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tlogin('');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<span className=\"align-middle\">\n\t\t\t\t\t\t<i className=\"fas fa-sign-out-alt mr-2\" />\n\t\t\t\t\t\tLogout\n\t\t\t\t\t</span>\n\t\t\t\t</NavDropdown.Item>\n\t\t\t</NavDropdown>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Navbar bg=\"light\" expand=\"lg\">\n\t\t\t\t<Container>\n\t\t\t\t\t<Navbar.Brand href=\"/\">\n\t\t\t\t\t\t<Image src=\"./dexfair_00.png\" style={{ height: '32px' }} fluid />\n\t\t\t\t\t</Navbar.Brand>\n\t\t\t\t\t<Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n\t\t\t\t\t<Navbar.Collapse id=\"responsive-navbar-nav\">\n\t\t\t\t\t\t<Nav className=\"mr-auto\" />\n\t\t\t\t\t\t<Nav>{DrawNetwork()}</Nav>\n\t\t\t\t\t</Navbar.Collapse>\n\t\t\t\t</Container>\n\t\t\t</Navbar>\n\t\t\t<CSSTransition in={isConnected} timeout={300} classNames=\"zoom\" unmountOnExit>\n\t\t\t\t<Container className=\"my-5\">\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<Card.Header>\n\t\t\t\t\t\t\t<Image src={walletIcon} style={{ height: '24px' }} fluid />\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t<span className=\"align-middle\">{account}</span>\n\t\t\t\t\t\t\t<span className=\"align-middle\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"link\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\thref={`${NETWORKS[network].blockscout}/address/${account}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i className=\"fas fa-external-link-alt\" />\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</Card.Header>\n\t\t\t\t\t\t<Card.Body>\n\t\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t\t\t<InputGroup.Prepend>\n\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text>\n\t\t\t\t\t\t\t\t\t\t\t\t<Image src=\"./icon-celo-CELO-dark-f.svg\" style={{ height: '24px' }} />\n\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\n\t\t\t\t\t\t\t\t\t\t</InputGroup.Prepend>\n\t\t\t\t\t\t\t\t\t\t<Form.Control placeholder=\"...loading\" value={balance.celo} readOnly />\n\t\t\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t\t<InputGroup>\n\t\t\t\t\t\t\t\t\t\t<InputGroup.Prepend>\n\t\t\t\t\t\t\t\t\t\t\t<InputGroup.Text>\n\t\t\t\t\t\t\t\t\t\t\t\t<Image sizes=\"sm\" src=\"./icon-celo-dollar-black-f.svg\" style={{ height: '24px' }} />\n\t\t\t\t\t\t\t\t\t\t\t</InputGroup.Text>\n\t\t\t\t\t\t\t\t\t\t</InputGroup.Prepend>\n\t\t\t\t\t\t\t\t\t\t<Form.Control placeholder=\"...loading\" value={balance.cusd} readOnly />\n\t\t\t\t\t\t\t\t\t</InputGroup>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t</Card.Body>\n\t\t\t\t\t</Card>\n\t\t\t\t</Container>\n\t\t\t</CSSTransition>\n\t\t\t<Board updataMainBalance={updataMainBalance} />\n\t\t\t<ModalSettings\n\t\t\t\tshow={showSettings}\n\t\t\t\tonHide={() => {\n\t\t\t\t\tsetShowSettings(false);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<ModalAddToken\n\t\t\t\tcelo={celo}\n\t\t\t\tnetwork={network}\n\t\t\t\ttokens={tokens}\n\t\t\t\tinsertToken={(token: Token) => StoreActions.tokenInsert(network, token)}\n\t\t\t\tshow={showAddToken}\n\t\t\t\tonHide={() => {\n\t\t\t\t\tsetShowAddToken(false);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport default connect(\n\t({ dexfairStore }: StoreState) => ({ ...dexfairStore }),\n\t(dispatch) => ({\n\t\tStoreActions: bindActionCreators(storeActions, dispatch),\n\t})\n)(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from 'redux';\nimport { DexfairStore, dexfairStoreReducer as dexfairStore } from './dexfair';\n\nexport interface StoreState {\n\tdexfairStore: DexfairStore;\n}\n\nexport default combineReducers<StoreState>({\n\tdexfairStore,\n});\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport configureStore from './store/configureStore';\n\nconst store = configureStore();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { createStore, Store } from 'redux';\nimport modules, { StoreState } from './modules';\n\nexport default function configureStore(): Store<StoreState> {\n\tconst store = createStore(modules);\n\treturn store;\n}\n"],"sourceRoot":""}