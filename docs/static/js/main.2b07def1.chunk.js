(this.webpackJsonpdexfair=this.webpackJsonpdexfair||[]).push([[0],{187:function(e,t,n){"use strict";var a=n(294);n(951);a.a.initializeApp({apiKey:"AIzaSyBvieQNVgY4SUOOwmLT7sTKhwdXz5qwag0",authDomain:"dexfair.firebaseapp.com",projectId:"dexfair",storageBucket:"dexfair.appspot.com",messagingSenderId:"922079223142",appId:"1:922079223142:web:f1d05767d01c369cbebca7",measurementId:"G-KGPWY9W7YF"});var s=a.a.firestore();t.a=s},286:function(e,t,n){},467:function(e,t,n){"use strict";(function(e){var a=n(4),s=n.n(a),r=n(20),c=n(185),i=n(12),o=n(10),l=n(2),u=n(0),d=n.n(u),b=n(188),f=n(473),j=n(239),x=n(468),p=n.n(x),k=n(471),h=n(131),O=n.n(h),m=n(187);t.a=function(t){var n=d.a.useState(""),a=Object(o.a)(n,2),u=a[0],x=a[1],w=d.a.useState(0),g=Object(o.a)(w,2),v=g[0],S=g[1],y=d.a.useState(""),N=Object(o.a)(y,2),A=N[0],T=N[1],B=d.a.useState(""),C=Object(o.a)(B,2),E=C[0],W=C[1],I=d.a.useState(""),M=Object(o.a)(I,2),L=M[0],F=M[1],P=d.a.useState(!1),G=Object(o.a)(P,2),K=G[0],q=G[1],U=d.a.useState(!1),D=Object(o.a)(U,2),H=D[0],J=D[1],R=d.a.useState(null),_=Object(o.a)(R,2),z=_[0],V=_[1],X=t.celo,Y=t.show,Q=t.txData,Z=t.updataMainBalance,$=t.onHide;function ee(t){if(t&&!H){J(!0);var n=JSON.parse(t),a=X.kit.web3.utils.sha3("metatx:key:".concat(n.method,":").concat(n.from,":").concat(n.nonce)),r=X.kit.web3.utils.sha3("metatx:address:".concat(n.from)),o=X.kit.web3.utils.sha3("metatx:index:".concat(n.method,":").concat(n.from,":").concat(n.nonce));if(a&&r&&o){var l="metatx/otc/".concat(e.from(r.replace("0x",""),"hex").toString("base64").replaceAll("/","@")),u="".concat(e.from(o.replace("0x",""),"hex").toString("base64").replaceAll("/","@"));m.a.collection(l).doc(u).get().then(function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,i,o,d,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.exists){e.next=4;break}console.log("No such document!"),e.next=36;break;case 4:if(!(n=t.data())||!n.value){e.next=36;break}if(!(r=JSON.parse(h.AES.decrypt(n.value,a).toString(O.a.enc.Utf8))).sig){e.next=36;break}return e.prev=8,o=new X.kit.web3.eth.Contract([r.abi.sender]),e.next=12,X.getAccounts();case 12:return d=e.sent,e.next=15,X.kit.sendTransaction({from:d[0],to:r.to,data:(i=o.methods).otc.apply(i,Object(c.a)(r.parms).concat([r.from,r.sig])).encodeABI()});case 15:return b=e.sent,e.t0=m.a.collection(l).doc(u),e.t1=h.AES,e.t2=JSON,e.t3=d[0],e.next=22,b.getHash();case 22:return e.t4=e.sent,e.t5={sender:e.t3,hash:e.t4},e.t6=e.t2.stringify.call(e.t2,e.t5),e.t7=a,e.t8=e.t1.encrypt.call(e.t1,e.t6,e.t7).toString(),e.t9={hash:e.t8},e.t0.update.call(e.t0,e.t9),e.next=31,ne(d[0],{celoTx:b});case 31:e.next=36;break;case 33:e.prev=33,e.t10=e.catch(8),console.log("Error getting document",e.t10);case 36:case"end":return e.stop()}}),e,null,[[8,33]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error getting document",e)}))}}}function te(e){q(!1),S(2),T("alert alert-danger"),x(e.message?e.message:e.toString()),W("")}function ne(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(i.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!1),F(""),x("send transaction..."),!n.celoTx){e.next=9;break}return e.next=6,n.celoTx.waitReceipt();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,X.kit.web3.eth.getTransactionReceipt(n.hash);case 11:e.t0=e.sent;case 12:if(a=e.t0,S(1),T("alert alert-success"),x("send transaction...success"),W(a.transactionHash),!t){e.next=20;break}return e.next=20,Z(t.toString());case 20:Q.callback&&Q.callback();case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){z&&(z.onSnapshot((function(){}))(),V(null));$()}return d.a.useEffect((function(){function t(){return(t=Object(i.a)(s.a.mark((function t(){var n,a,o,l,u,d,b,f,j,p,k;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,F(""),!Q.celoTx){t.next=11;break}return x("send transaction..."),t.next=6,X.kit.sendTransaction(Q.celoTx);case 6:return n=t.sent,t.next=9,ne(Q.celoTx.from,{celoTx:n});case 9:t.next=30;break;case 11:if(!Q.metaTx){t.next=29;break}return o=new X.kit.web3.eth.Contract([Q.metaTx.abi.signer]),l=X.kit.web3.utils.keccak256((a=o.methods).otc.apply(a,Object(c.a)(Q.metaTx.parms)).encodeABI()),t.t0=r.a,t.t1=Object(r.a)({},Q.metaTx),t.t2={},t.next=19,X.sign(l||"",Q.metaTx.from);case 19:t.t3=t.sent,t.t4={sig:t.t3},u=(0,t.t0)(t.t1,t.t2,t.t4),d=parseInt((1e8*Math.random()).toString(),10),b=X.kit.web3.utils.sha3("metatx:key:".concat(u.abi.signer.name,":").concat(u.from,":").concat(d)),f=X.kit.web3.utils.sha3("metatx:address:".concat(u.from)),j=X.kit.web3.utils.sha3("metatx:index:".concat(u.abi.signer.name,":").concat(u.from,":").concat(d)),l&&b&&f&&j&&(p="metatx/otc/".concat(e.from(f.replace("0x",""),"hex").toString("base64").replaceAll("/","@")),k="".concat(e.from(j.replace("0x",""),"hex").toString("base64").replaceAll("/","@")),m.a.collection(p).doc(k).set({value:h.AES.encrypt(JSON.stringify(u),b).toString(),hash:"",deadline:Q.metaTx.parms[3]}).then((function(){F(JSON.stringify({method:u.abi.signer.name,from:u.from,nonce:d}));var e=m.a.collection(p).doc(k);V(e),e.onSnapshot(function(){var t=Object(i.a)(s.a.mark((function t(n){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.exists?(a=n.data())&&a.hash&&(r=JSON.parse(h.AES.decrypt(a.hash,b).toString(O.a.enc.Utf8)),ne(u.from,{hash:r.hash})):console.log("No such document!"),e.onSnapshot((function(){}))(),V(null);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){console.log("Encountered error: ".concat(t)),e.onSnapshot((function(){}))(),V(null)}))}))),t.next=30;break;case 29:q(!0);case 30:t.next=39;break;case 32:t.prev=32,t.t5=t.catch(0),console.log(new Error(JSON.stringify(t.t5))),S(2),T("alert alert-danger"),x(t.t5.message?t.t5.message:t.t5.toString()),W("");case 39:case"end":return t.stop()}}),t,null,[[0,32]])})))).apply(this,arguments)}Y&&(S(0),T(""),x(""),W(""),q(!1),J(!1),function(){t.apply(this,arguments)}())}),[X.kit,Y,Q]),Object(l.jsx)("div",{className:"ModalSndTx",children:Object(l.jsxs)(b.a,{show:Y,onHide:se,"aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",centered:!0,children:[Object(l.jsx)(b.a.Header,{closeButton:!0,className:A,children:Object(l.jsx)(b.a.Title,{id:"contained-modal-title-vcenter",children:Q.title})}),Object(l.jsxs)(b.a.Body,{children:[Object(l.jsx)("p",{hidden:!!L,children:u}),Object(l.jsx)(f.a,{hidden:!L||K,className:"justify-content-center",children:Object(l.jsx)(p.a,{value:L})}),Object(l.jsx)(f.a,{hidden:!K,className:"justify-content-center",children:K?Object(l.jsx)(k.a,{style:{height:320,width:320},facingMode:"rear",onError:te,onScan:ee}):null})]}),Object(l.jsxs)(b.a.Footer,{children:[Object(l.jsx)(j.a,{hidden:1!==v,variant:"link",onClick:function(){window.open("".concat(X.getNetwork().blockscout,"/tx/").concat(E))},children:"Blockscout"}),Object(l.jsx)(j.a,{onClick:se,disabled:0===v,children:"Close"})]})]})})}}).call(this,n(5).Buffer)},499:function(e,t){},501:function(e,t){},515:function(e,t){},516:function(e,t){},540:function(e,t){},542:function(e,t){},556:function(e,t){},584:function(e,t){},586:function(e,t){},593:function(e,t){},594:function(e,t){},675:function(e,t){},948:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(0),r=n.n(s),c=n(75),i=n.n(c),o=n(34),l=(n(486),n(20)),u=n(4),d=n.n(u),b=n(12),f=n(10),j=n(968),x=n(963),p=n(970),k=n(967),h=n(472),O=n(971),m=n(239),w=n(473),g=n(470),v=n(962),S=n(969),y=n(965),N=n(128),A=n(32),T=n(185),B=n(51),C="celo/NETWORK",E="celo/CONNECT",W="celo/ACCOUNT",I="celo/DEXFAIR",M="celo/SETTING",L="tokens/INSERT",F="tokens/REMOVE",P="tokens/UPDATE";var G={networkUpdate:function(e){return{type:C,meta:{network:e}}},networkConnect:function(e){return{type:E,meta:{connection:e}}},accountUpdate:function(e){return{type:W,meta:{address:e}}},dexfairUpdate:function(e){return{type:I,payload:e}},dexfairSetting:function(e,t){return{type:M,meta:{key:e,value:t}}},tokenInsert:function(e,t){return{type:L,meta:{network:e,token:t}}},tokenUpdate:function(e,t,n){return{type:P,meta:{network:e,address:t,balance:n}}},tokenRemove:function(e,t){return{type:F,meta:{network:e,address:t}}}},K={celo:new N.Celo(N.NETWORKS.Mainnet),network:"Mainnet",isConnected:!1,account:"",contract:{address:{},abi:[]},settings:{slippage:{name:"Slippage tolerance",desc:"Transaction will revert if the price is too expensive.",unit:"%",value:"95"},deadline:{name:"Transaction deadline",desc:"Transaction will revert if pending is too long.",unit:"min",value:"5"}},tokens:{Mainnet:{list:[],balance:{}},Alfajores:{list:[],balance:{}},Baklava:{list:[],balance:{}}}};n(286);var q=n(972),U=n(966),D=n(467),H=n(93),J=n(96),R=n(964),_=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState(!1),n=Object(f.a)(t,2),s=n[0],c=n[1],i=e.celo,o=e.network,l=e.isConnected,u=e.tokenList,j=e.token,p=e.label,k=e.enabled,h=e.amount,O=e.text,w=e.success,g=e.error,y=e.getAllowance,N=e.setApprove,A=e.updateAmount,T=e.changeToken;function B(){return C.apply(this,arguments)}function C(){return(C=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.address){e.next=5;break}return e.next=3,y(j);case 3:t=e.sent,c(i.kit.web3.utils.toBN(t).gt(i.kit.web3.utils.toBN("0")));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){B()}),[o,k,j]),Object(a.jsx)("div",{className:"FormToken",children:Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:p}),Object(a.jsxs)(v.a,{children:[Object(a.jsxs)(v.a.Prepend,{children:[Object(a.jsxs)(v.a.Text,{children:[Object(a.jsx)(x.a,{hidden:!j.icon,src:j?j.icon:"",style:{height:"24px"}}),Object(a.jsx)("i",{hidden:!!j.icon,className:"fas fa-question-circle"})]}),Object(a.jsx)(m.a,{variant:"danger",hidden:s||!l,onClick:function(){N&&N(j,Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:case"end":return e.stop()}}),e)}))))},children:Object(a.jsx)("i",{className:"fas fa-lock"})})]}),Object(a.jsx)(S.a.Control,{type:"number",placeholder:"0.0",readOnly:!k,disabled:!k,value:h,onChange:function(e){A(e.target.value)}}),Object(a.jsx)(R.a,{hidden:0===u.length||!j||!j.symbol,as:v.a.Append,variant:"outline-secondary",title:j?j.symbol:"",onSelect:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=JSON.parse(t)).address!==j.address&&T(n);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:u.map((function(e,t){return Object(a.jsx)(J.a.Item,{eventKey:JSON.stringify(e),children:e.symbol},"T_".concat(t.toString()))}))})]}),Object(a.jsx)(S.a.Text,{className:"text-danger",children:g}),Object(a.jsx)(S.a.Text,{className:"text-success",hidden:""!==g,children:w}),Object(a.jsxs)(S.a.Text,{className:"text-muted",hidden:""!==w||""!==g,children:[O,"\xa0"]})]})})})),z=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState({icon:"",symbol:"",address:""}),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState(""),o=Object(f.a)(i,2),l=o[0],u=o[1],j=r.a.useState(""),x=Object(f.a)(j,2),p=x[0],k=x[1],h=r.a.useState(""),O=Object(f.a)(h,2),w=O[0],g=O[1],v=r.a.useState(""),y=Object(f.a)(v,2),N=y[0],A=y[1],T=r.a.useState(""),B=Object(f.a)(T,2),C=B[0],E=B[1],W=r.a.useState(!1),I=Object(f.a)(W,2),M=I[0],L=I[1],F=e.celo,P=e.network,G=e.isConnected,K=e.account,q=e.tokens,U=e.hidden,D=e.estimateFee,J=e.openTxModal;r.a.useEffect((function(){q[P].list.length>0&&s.address!==q[P].list[0].address?(c(q[P].list[0]),u("")):0===q[P].list.length&&s.address&&c({icon:"",symbol:"",address:""})}),[P,q]);var R=r.a.useCallback(Object(H.debounce)((function(e){return z.apply(this,arguments)}),300),[p,s,l]);function z(){return(z=Object(b.a)(d.a.mark((function e(t){var n,a,r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t||!F.kit.web3.utils.isAddress(K)||!F.kit.web3.utils.isAddress(l)){e.next=42;break}if(e.prev=1,s.address!==q[P].list[0].address){e.next=26;break}return n=F.kit.web3.utils.toWei(t),e.next=6,F.kit.web3.eth.estimateGas({from:K,to:l,value:t});case 6:if(a=e.sent,r=F.kit.web3.utils.toBN(n).add(F.kit.web3.utils.toBN(a)),e.t0=F.kit.web3.utils,e.t1=q[P].balance[q[P].list[0].address],e.t1){e.next=14;break}return e.next=13,F.kit.web3.eth.getBalance(K);case 13:e.t1=e.sent;case 14:if(e.t2=e.t1,!e.t0.toBN.call(e.t0,e.t2).lt(r)){e.next=21;break}return L(!0),A(""),E("out of balance"),e.abrupt("return");case 21:L(!1),A("fee : ".concat(D(a))),E(""),e.next=32;break;case 26:return e.next=28,F.kit.web3.eth.estimateGas({from:K,to:s.address,data:F.contracts.erc20.methods.transfer(l,F.kit.web3.utils.toWei(t)).encodeABI()});case 28:c=e.sent,L(!1),A("fee : ".concat(D(c))),E("");case 32:e.next=40;break;case 34:e.prev=34,e.t3=e.catch(1),console.log(new Error(e.t3)),L(!0),A(""),E(e.t3.message?e.t3.message:e.t3.Error.toString());case 40:e.next=45;break;case 42:L(!0),A(""),E("");case 45:case"end":return e.stop()}}),e,null,[[1,34]])})))).apply(this,arguments)}return Object(a.jsx)("div",{className:"Transfer",hidden:U,children:Object(a.jsx)(S.a,{children:Object(a.jsxs)("fieldset",{disabled:!G,children:[Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"To"}),Object(a.jsx)(S.a.Control,{type:"text",placeholder:"0x",isInvalid:l.length>0&&!F.kit.web3.utils.isAddress(l),isValid:l.length>0&&F.kit.web3.utils.isAddress(l),value:l,onChange:function(e){F.kit.web3.utils.isAddress(e.target.value)?(g(""),u(e.target.value)):(g(e.target.value.length>0?"is not address":""),u(e.target.value))}}),Object(a.jsx)(S.a.Control.Feedback,{type:"invalid",children:w}),Object(a.jsx)(S.a.Text,{className:"text-muted",hidden:w.length>0,children:"\xa0"})]}),Object(a.jsx)(_,{tokenList:q[P].list,token:s,label:"Amount",enabled:F.kit.web3.utils.isAddress(l),amount:p,success:N,error:C,getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","99999999999999999999999999999999");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateAmount:function(e){k(e),R(e)},changeToken:function(e){k(""),c(e)}}),Object(a.jsx)(m.a,{variant:G?"primary":"secondary",onClick:function(){F.kit.web3.utils.isAddress(K)&&""!==l&&""!==p&&F.kit.web3.utils.isAddress(l)&&(s.address===q[P].list[0].address?J({title:"Transfer",celoTx:{from:K,to:l,value:F.kit.web3.utils.toWei(p)},callback:function(){console.log("Transfer 0")}}):J({title:"Transfer",celoTx:{from:K,to:s.address,data:F.contracts.erc20.methods.transfer(l,F.kit.web3.utils.toWei(p)).encodeABI()},callback:function(){console.log("Transfer 1")}}))},disabled:!p||M||""!==w||""!==C||""===N||!F.kit.web3.utils.isAddress(l),block:!0,children:"Transfer"})]})})})})),V=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=e.tokenList,n=e.slot0,s=e.slot1,r=e.updateAmount,c=e.changeToken,i=e.getAllowance,o=e.setApprove;return Object(a.jsxs)("div",{className:"DexfairLiquidity",children:[Object(a.jsx)(_,{tokenList:t,token:n.token,label:n.label||n.token.symbol,enabled:n.enable,amount:n.amount,text:n.text,success:n.success,error:n.error,getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:o,updateAmount:function(e){r(0,e)},changeToken:function(e){c(0,e)}}),Object(a.jsx)(_,{tokenList:t,token:s.token,label:s.label||s.token.symbol,enabled:s.enable,amount:s.amount,text:s.text,success:s.success,error:s.error,getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:o,updateAmount:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r(1,t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),changeToken:function(e){c(1,e)}})]})})),X=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState([]),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState({icon:"",symbol:"",address:""}),o=Object(f.a)(i,2),l=o[0],u=o[1],j=r.a.useState({icon:"",symbol:"",address:""}),x=Object(f.a)(j,2),p=x[0],k=x[1],h=r.a.useState(""),O=Object(f.a)(h,2),w=O[0],g=O[1],v=r.a.useState(""),S=Object(f.a)(v,2),y=S[0],N=S[1],A=r.a.useState(""),T=Object(f.a)(A,2),B=T[0],C=T[1],E=r.a.useState(""),W=Object(f.a)(E,2),I=W[0],M=W[1],L=r.a.useState(null),F=Object(f.a)(L,2),P=F[0],G=F[1],K=e.celo,q=e.network,U=e.isConnected,D=e.account,J=e.settings,R=e.tokens,_=e.hidden,z=e.getAllowance,X=e.setApprove,Y=e.estimateFee,Q=e.openTxModal;r.a.useEffect((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=8;break}return e.next=3,K.kit.contracts.getExchange();case 3:t=e.sent,G(t),c([R[q].list[0],R[q].list[1]]),u(R[q].list[0]),k(R[q].list[1]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}R[q].list.length>1&&function(){e.apply(this,arguments)}()}),[q,R]);var Z=r.a.useCallback(Object(H.debounce)((function(e,t,n){return $.apply(this,arguments)}),300),[w,l,p]);function $(){return($=Object(b.a)(d.a.mark((function e(t,n,a){var r,c,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n){e.next=38;break}return r=K.kit.web3.utils.toWei(n).toString(),c=t.address===s[0].address,e.next=5,P.contract.methods.getBuyTokenAmount(r,c).call();case 5:if(i=e.sent,o=K.kit.web3.utils.toBN(i.toString()).mul(K.kit.web3.utils.toBN(parseInt((1e3-10*parseInt(J.slippage.value,10)).toString(),10).toString())).div(K.kit.web3.utils.toBN(1e3)).toString(),!K.kit.web3.utils.isAddress(D)){e.next=34;break}return e.prev=8,e.next=11,K.kit.web3.eth.estimateGas({from:D,to:P.address,data:P.contract.methods.exchange(r,o,c).encodeABI()});case 11:if(l=e.sent,t.address!==s[0].address){e.next=23;break}return u=K.kit.web3.utils.toBN(r).add(K.kit.web3.utils.toBN(l)),e.t0=K.kit.web3.utils,e.next=17,K.kit.web3.eth.getBalance(D);case 17:if(e.t1=e.sent,!e.t0.toBN.call(e.t0,e.t1).lt(u)){e.next=23;break}return N(K.kit.web3.utils.fromWei(i.toString())),M("out of balance"),e.abrupt("return");case 23:N(K.kit.web3.utils.fromWei(i.toString())),C("fee : ".concat(Y(l))),M(""),e.next=32;break;case 28:e.prev=28,e.t2=e.catch(8),N(K.kit.web3.utils.fromWei(i.toString())),M(e.t2.message?e.t2.message:e.t2.Error.toString());case 32:e.next=36;break;case 34:N(K.kit.web3.utils.fromWei(i.toString())),M("");case 36:e.next=41;break;case 38:N(""),C(""),M("");case 41:case"end":return e.stop()}}),e,null,[[8,28]])})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:"Exchange",hidden:_,children:[Object(a.jsx)(V,{tokenList:s,slot0:{label:"Sell",token:l,enable:!0,amount:w,success:B,error:I},slot1:{label:"Buy (estimated)",token:p,enable:!1,amount:y,success:"",error:""},getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(P.address,t.address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:function(e,t){X(P.address,e.address,t)},updateAmount:function(e,t){switch(e){case 0:g(t),Z(l,t,p)}return{amount:"",success:"",error:""}},changeToken:function(e,t){switch(e){case 0:p.address===t.address?(k(l),u(t)):u(t);break;case 1:k(t),l.address===t.address?(u(p),k(t)):k(t)}g(""),N(""),C(""),M("")}}),Object(a.jsx)(m.a,{variant:U?"primary":"secondary",onClick:function(){if(K.kit.web3.utils.isAddress(D)&&""!==w){var e=K.kit.web3.utils.toWei(w),t=K.kit.web3.utils.toBN(K.kit.web3.utils.toWei(y)).mul(K.kit.web3.utils.toBN(parseInt((1e3-10*parseInt(J.slippage.value,10)).toString(),10).toString())).div(K.kit.web3.utils.toBN(1e3)).toString(),n=l.address===R[q].list[0].address;Q({title:"Exchange",celoTx:{from:D,to:P.address,data:P.contract.methods.exchange(e,t,n).encodeABI()},callback:function(){console.log("exchange")}})}},disabled:!U||""!==I||""===w||""===B,block:!0,children:"Exchange"})]})})),Y=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState({icon:"",symbol:"",address:""}),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState({icon:"",symbol:"",address:""}),o=Object(f.a)(i,2),l=o[0],u=o[1],j=r.a.useState(""),x=Object(f.a)(j,2),p=x[0],k=x[1],h=r.a.useState(""),O=Object(f.a)(h,2),v=O[0],N=O[1],A=r.a.useState(""),T=Object(f.a)(A,2),B=T[0],C=T[1],E=r.a.useState(""),W=Object(f.a)(E,2),I=W[0],M=W[1],L=r.a.useState(!1),F=Object(f.a)(L,2),P=F[0],G=F[1],K=r.a.useState(null),q=Object(f.a)(K,2),U=q[0],D=q[1],J=r.a.useState({adr:""}),R=Object(f.a)(J,2),_=R[0],z=R[1],X=e.celo,Y=e.network,Q=e.isConnected,Z=e.account,$=e.tokens,ee=e.contract,te=e.settings,ne=e.hidden,ae=e.getAllowance,se=e.setApprove,re=e.estimateFee,ce=e.openTxModal;r.a.useEffect((function(){if($[Y].list.length>1){var e=ee.address[Y];if(!U&&e){var t=new X.kit.web3.eth.Contract(ee.abi,e);D(t)}else U&&(c($[Y].list[0]),u($[Y].list[1]),oe($[Y].list[0],$[Y].list[1]))}}),[Y,$,U]);var ie=r.a.useCallback(Object(H.debounce)((function(e,t,n){return de.apply(this,arguments)}),300),[p,s,l]);function oe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(b.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=7;break}return e.next=3,U.methods.getPair([t.address,n.address]).call();case 3:a=e.sent,z(a),e.next=8;break;case 7:z({adr:""});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return Math.floor((new Date).getTime()/1e3)+60*parseInt(te.deadline.value,10)}function de(){return(de=Object(b.a)(d.a.mark((function e(t,n,a){var s,r,c,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===n){e.next=41;break}return s=ue(),r=X.kit.web3.utils.toWei(n).toString(),e.next=5,U.methods.getBuyTokenAmount([t.address,a.address],r).call();case 5:if(c=e.sent,i=X.kit.web3.utils.toBN(c).mul(X.kit.web3.utils.toBN(parseInt((1e3-10*parseInt(te.slippage.value,10)).toString(),10).toString())).div(X.kit.web3.utils.toBN(1e3)).toString(),!X.kit.web3.utils.isAddress(Z)){e.next=37;break}return e.prev=8,e.next=11,X.kit.web3.eth.estimateGas({from:Z,to:U.options.address,data:U.methods.exchange([t.address,a.address],[r,i],s).encodeABI()});case 11:if(o=e.sent,t.address!==$[Y].list[0].address){e.next=26;break}if(l=X.kit.web3.utils.toBN(r).add(X.kit.web3.utils.toBN(o)),e.t0=X.kit.web3.utils,e.t1=$[Y].balance[$[Y].list[0].address],e.t1){e.next=20;break}return e.next=19,X.kit.web3.eth.getBalance(Z);case 19:e.t1=e.sent;case 20:if(e.t2=e.t1,!e.t0.toBN.call(e.t0,e.t2).lt(l)){e.next=26;break}return N(X.kit.web3.utils.fromWei(c.toString())),M("out of balance"),e.abrupt("return");case 26:N(X.kit.web3.utils.fromWei(c.toString())),C("fee : ".concat(re(o))),M(""),e.next=35;break;case 31:e.prev=31,e.t3=e.catch(8),N(X.kit.web3.utils.fromWei(c.toString())),M(e.t3.message?e.t3.message:e.t3.Error.toString());case 35:e.next=39;break;case 37:N(X.kit.web3.utils.fromWei(c.toString())),M("");case 39:e.next=44;break;case 41:N(""),C(""),M("");case 44:case"end":return e.stop()}}),e,null,[[8,31]])})))).apply(this,arguments)}function be(){return(be=Object(b.a)(d.a.mark((function e(){var t,n,a,r,c,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=ue(),n=X.kit.web3.utils.toWei(p),a=X.kit.web3.utils.toBN(X.kit.web3.utils.toWei(v)).mul(X.kit.web3.utils.toBN(10*parseInt(te.slippage.value,10))).div(X.kit.web3.utils.toBN(1e3)).toString(),e.next=5,X.kit.web3.eth.getChainId();case 5:r=e.sent,c=U.methods.otc(r,[s.address,l.address],[n,a],t),i=U.methods.otc(r,[s.address,l.address],[n,a],t,Z,"0x"),ce({title:"Exchange - OTC (Maker)",metaTx:{abi:{signer:JSON.parse(JSON.stringify(c._method)),sender:JSON.parse(JSON.stringify(i._method))},parms:c.arguments,from:Z,to:U.options.address},callback:function(){console.log("Exchange - OTC (Maker)")}});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:"DexfairExchange",hidden:ne,children:[Object(a.jsx)(V,{tokenList:$[Y].list,slot0:{label:"Sell",token:s,enable:X.kit.web3.utils.isAddress(_.adr)&&"0x0000000000000000000000000000000000000000"!==_.adr,amount:p,success:B,error:I},slot1:{label:"Buy (estimated)",token:l,enable:!1,amount:v,success:"",error:""},getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(U.options.address,t.address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:function(e,t){se(U.options.address,e.address,t)},updateAmount:function(e,t){switch(e){case 0:k(t),ie(s,t,l)}return{amount:"",success:"",error:""}},changeToken:function(e,t){switch(e){case 0:l.address===t.address?(u(s),c(t)):(c(t),oe(t,l));break;case 1:u(t),s.address===t.address?(c(l),u(t)):(u(t),oe(s,t))}k(""),N(""),C(""),M("")}}),Object(a.jsxs)("fieldset",{disabled:!Q,children:[Object(a.jsx)(y.a,{in:!P,timeout:400,classNames:"fade",unmountOnExit:!0,children:Object(a.jsx)(w.a,{hidden:P,children:Object(a.jsx)(g.a,{children:Object(a.jsx)(m.a,{variant:Q?"primary":"secondary",disabled:!Q||(""!==I||""===p||""===B)&&"0x0000000000000000000000000000000000000000"!==_.adr,block:!0,onClick:function(){"0x0000000000000000000000000000000000000000"!==_.adr?function(){var e=ue(),t=X.kit.web3.utils.toWei(p),n=X.kit.web3.utils.toBN(X.kit.web3.utils.toWei(v)).mul(X.kit.web3.utils.toBN(10*parseInt(te.slippage.value,10))).div(X.kit.web3.utils.toBN(1e3)).toString();ce({title:"Exchange",celoTx:{from:Z,to:U.options.address,data:U.methods.exchange([s.address,l.address],[t,n],e).encodeABI()},callback:function(){console.log("Exchange")}})}():ce({title:"Create Pair",celoTx:{from:Z,to:U.options.address,data:U.methods.register([s.address,l.address]).encodeABI()},callback:function(){console.log("Exchange")}})},children:"0x0000000000000000000000000000000000000000"!==_.adr?"Exchange":"Create Pair"})})})}),Object(a.jsx)(y.a,{in:P,timeout:400,classNames:"fade",unmountOnExit:!0,children:Object(a.jsxs)(w.a,{hidden:!P,children:[Object(a.jsx)(g.a,{children:Object(a.jsx)(m.a,{variant:Q?"primary":"secondary",disabled:!Q||""!==I||""===p||""===B,block:!0,onClick:function(){return be.apply(this,arguments)},children:"Maker"})}),Object(a.jsx)(g.a,{children:Object(a.jsx)(m.a,{variant:Q?"primary":"secondary",block:!0,onClick:function(){ce({title:"Exchange - OTC (Taker)",callback:function(){console.log("Exchange - OTC")}})},children:"Taker"})})]})}),Object(a.jsx)(S.a,{children:Object(a.jsx)(S.a.Check,{id:"otc-switch",type:"switch",label:"OTC",value:"true",className:"mt-3",checked:P,onChange:function(e){G(e.target.checked)}})})]})]})})),Q=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState(""),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState(""),o=Object(f.a)(i,2),l=o[0],u=o[1],d=e.celo,b=e.network,j=e.isConnected,x=e.account,p=e.tokens,k=e.token0,h=e.token1,O=e.getAllowance,w=e.setApprove,g=e.changeToken,y=e.createPair,N=e.pair;return r.a.useEffect((function(){N.adr&&"0x0000000000000000000000000000000000000000"!==N.adr&&N.tokens&&N.reserves&&(N.tokens[0]===k.address?(c(d.kit.web3.utils.fromWei(N.reserves[0])),u(d.kit.web3.utils.fromWei(N.reserves[1]))):(c(d.kit.web3.utils.fromWei(N.reserves[1])),u(d.kit.web3.utils.fromWei(N.reserves[0]))))}),[k,h,N,x]),Object(a.jsxs)("div",{className:"DexfairLiquidityStatus",children:[Object(a.jsx)(V,{tokenList:p[b].list,slot0:{token:k,enable:!1,amount:s,success:"",error:""},slot1:{token:h,enable:!1,amount:l,success:"",error:""},getAllowance:O,setApprove:w,updateAmount:function(e,t){},changeToken:g}),Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"Total Supply"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a.Control,{value:N.total,readOnly:!0,disabled:!0})})]}),Object(a.jsxs)(S.a.Group,{hidden:!j,children:[Object(a.jsx)(S.a.Text,{children:"Liquidity"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a.Control,{value:N.balance,readOnly:!0,disabled:!0})})]}),Object(a.jsx)(m.a,{variant:j?"primary":"secondary",disabled:d.kit.web3.utils.isAddress(N.adr)||"0x0000000000000000000000000000000000000000"===N.adr,block:!0,onClick:function(){y((function(){console.log("Pair Create..")}))},children:"Crate Pair"})]})})),Z=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState(""),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState(""),o=Object(f.a)(i,2),l=o[0],u=o[1],j=r.a.useState(""),x=Object(f.a)(j,2),p=x[0],k=x[1],h=r.a.useState(""),O=Object(f.a)(h,2),w=O[0],g=O[1],y=r.a.useState(""),N=Object(f.a)(y,2),A=N[0],T=N[1],B=r.a.useState(""),C=Object(f.a)(B,2),E=C[0],W=C[1],I=r.a.useState(""),M=Object(f.a)(I,2),L=M[0],F=M[1],P=e.celo,G=e.network,K=e.isConnected,q=e.account,U=e.settings,D=e.tokens,J=e.token0,R=e.token1,_=e.getAllowance,z=e.setApprove,X=e.changeToken,Y=e.pair,Q=e.exchange,Z=e.estimateFee,$=e.openTxModal;function ee(e){return e&&q?"Balance : ".concat(P.kit.web3.utils.fromWei(e)):""}function te(e){if(void 0!==Y.total&&Y.reserves&&Y.tokens){var t=Y.tokens[0]===J.address?Y.reserves[0]:Y.reserves[1],n=Y.tokens[1]===R.address?Y.reserves[1]:Y.reserves[0],a=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(e||"0")).mul(P.kit.web3.utils.toBN(n)).div(P.kit.web3.utils.toBN(t));return u(P.kit.web3.utils.fromWei(a)),P.kit.web3.utils.fromWei(a)}return"0"}function ne(e,t){if(void 0!==Y.total){var n=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.total));if(n.eq(P.kit.web3.utils.toBN(0))){for(var a=P.kit.web3.utils.toBN(1),s=P.kit.web3.utils.toBN(2),r=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(e||"0")).mul(P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(t||"0"))),c=r.add(a).div(s),i=r;c.sub(i).isNeg();)i=c,c=r.div(c).add(c).div(s);k(P.kit.web3.utils.fromWei(i))}else if(Y.reserves&&Y.tokens){var o=Y.tokens[0]===J.address?Y.reserves[0]:Y.reserves[1],l=Y.tokens[1]===R.address?Y.reserves[1]:Y.reserves[0],u=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(e||"0")).mul(n).div(P.kit.web3.utils.toBN(o)),d=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(t||"0")).mul(n).div(P.kit.web3.utils.toBN(l));k(u.lte(d)?P.kit.web3.utils.fromWei(u):P.kit.web3.utils.fromWei(d))}else k("")}else k("")}function ae(){return Math.floor((new Date).getTime()/1e3)+60*parseInt(U.deadline.value,10)}r.a.useEffect((function(){c(""),u(""),g(ee(D[G].balance[J.address])),T(ee(D[G].balance[R.address])),F(""),W("")}),[G,J,R,Y,D,q]);var se=r.a.useCallback(Object(H.debounce)((function(e,t){return re.apply(this,arguments)}),300),[Y,s,l]);function re(){return(re=Object(b.a)(d.a.mark((function e(t,n){var a,s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y.tokens||!K){e.next=15;break}return e.prev=1,a=ae(),s=Y.tokens[0]===J.address?[P.kit.web3.utils.toWei(t||"0").toString(),P.kit.web3.utils.toWei(n||"0").toString()]:[P.kit.web3.utils.toWei(n||"0").toString(),P.kit.web3.utils.toWei(t||"0").toString()],e.next=6,Q.methods.liquidityAdd(Y.tokens,s,a).estimateGas({from:q});case 6:r=e.sent,W("Fee : ".concat(Z(r))),F(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(new Error(e.t0)),F(e.t0.message?e.t0.message:e.t0.Error.toString());case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:"DexfairLiquidityAdd",children:[Object(a.jsx)(V,{tokenList:D[G].list,slot0:{token:J,enable:P.kit.web3.utils.isAddress(Y.adr)&&"0x0000000000000000000000000000000000000000"!==Y.adr,amount:s,text:w,success:"",error:""},slot1:{token:R,enable:P.kit.web3.utils.isAddress(Y.adr)&&"0x0000000000000000000000000000000000000000"!==Y.adr,amount:l,text:A,success:"",error:""},getAllowance:_,setApprove:z,updateAmount:function(e,t){switch(e){case 0:c(t),Y.total&&P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.total)).gt(P.kit.web3.utils.toBN("0"))?(u(te(t)),ne(t,te(t)),se(t,te(t))):(ne(t,l),se(t,l));break;case 1:u(t),ne(s,t),se(s,t)}},changeToken:function(e,t){k(""),X(e,t)}}),Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"Liquidity"}),Object(a.jsxs)(v.a,{children:[Object(a.jsx)(S.a.Control,{readOnly:!0,disabled:!0,placeholder:"0.0",type:"number",value:p}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(m.a,{disabled:!K||""!==L||""===E||""===s||""===l,variant:"primary",onClick:function(){if(Y.tokens){var e=ae(),t=Y.tokens[0]===J.address?[P.kit.web3.utils.toWei(s||"0").toString(),P.kit.web3.utils.toWei(l||"0").toString()]:[P.kit.web3.utils.toWei(l||"0").toString(),P.kit.web3.utils.toWei(s||"0").toString()];$({title:"Mint",celoTx:{from:q,to:Q.options.address,data:Q.methods.liquidityAdd(Y.tokens,t,e).encodeABI()},callback:function(){console.log("Mint 1")}})}},children:"Mint"})})]}),Object(a.jsx)(S.a.Text,{className:"text-muted",hidden:""!==E||""!==L,children:q?"Balance : ".concat(Y.balance):""}),Object(a.jsx)(S.a.Text,{className:"text-danger",children:L}),Object(a.jsxs)(S.a.Text,{className:"text-success",hidden:""!==L,children:[E,"\xa0"]})]})]})})),$=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState(""),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState(""),o=Object(f.a)(i,2),l=o[0],u=o[1],j=r.a.useState(""),x=Object(f.a)(j,2),p=x[0],k=x[1],h=r.a.useState(""),O=Object(f.a)(h,2),w=O[0],g=O[1],y=r.a.useState(""),N=Object(f.a)(y,2),A=N[0],T=N[1],B=r.a.useState(""),C=Object(f.a)(B,2),E=C[0],W=C[1],I=r.a.useState(""),M=Object(f.a)(I,2),L=M[0],F=M[1],P=e.celo,G=e.network,K=e.isConnected,q=e.account,U=e.settings,D=e.tokens,J=e.token0,R=e.token1,_=e.getAllowance,z=e.setApprove,X=e.changeToken,Y=e.pair,Q=e.exchange,Z=e.estimateFee,$=e.openTxModal;function ee(e){return e&&q?"Balance : ".concat(P.kit.web3.utils.fromWei(e)):""}function te(){return Math.floor((new Date).getTime()/1e3)+60*parseInt(U.deadline.value,10)}r.a.useEffect((function(){c(""),u(""),g(ee(D[G].balance[J.address])),T(ee(D[G].balance[R.address])),F(""),W("")}),[G,J,R,Y,D,q]);var ne=r.a.useCallback(Object(H.debounce)((function(e){return ae.apply(this,arguments)}),300),[Y,p]);function ae(){return(ae=Object(b.a)(d.a.mark((function e(t){var n,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y.tokens||!K){e.next=15;break}return e.prev=1,n=te(),a=P.kit.web3.utils.toWei(t).toString(),e.next=6,Q.methods.liquidityRemove(Y.tokens,a,n).estimateGas({from:q});case 6:s=e.sent,W("Fee : ".concat(Z(s))),F(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(new Error(e.t0)),F(e.t0.message?e.t0.message:e.t0.Error.toString());case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(a.jsxs)("div",{className:"DexfairLiquidityRemove",children:[Object(a.jsx)(V,{tokenList:D[G].list,slot0:{token:J,enable:P.kit.web3.utils.isAddress(Y.adr)&&"0x0000000000000000000000000000000000000000"!==Y.adr,amount:s,text:w,success:"",error:""},slot1:{token:R,enable:P.kit.web3.utils.isAddress(Y.adr)&&"0x0000000000000000000000000000000000000000"!==Y.adr,amount:l,text:A,success:"",error:""},getAllowance:_,setApprove:z,updateAmount:function(e,t){switch(e){case 0:c(t);break;case 1:u(t)}},changeToken:function(e,t){k(""),X(e,t)}}),Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"Liquidity"}),Object(a.jsxs)(v.a,{children:[Object(a.jsx)(S.a.Control,{readOnly:!K,disabled:!K||P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.balance||"0")).eq(P.kit.web3.utils.toBN("0")),placeholder:"0.0",type:"number",value:p,onChange:function(e){if(k(e.target.value),e.target.value&&Y.total&&Y.balance&&Y.tokens&&Y.reserves&&P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.total)).gt(P.kit.web3.utils.toBN("0"))&&P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.balance)).gt(P.kit.web3.utils.toBN("0"))){var t=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.total)),n=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.balance)),a=P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(e.target.value)),s=P.kit.web3.utils.fromWei(P.kit.web3.utils.toBN(Y.reserves[0]).mul(a.lte(n)?a:n).div(t).toString()),r=P.kit.web3.utils.fromWei(P.kit.web3.utils.toBN(Y.reserves[1]).mul(a.lte(n)?a:n).div(t).toString());J.address===Y.tokens[0]?(c(s),u(r)):(c(r),u(s)),ne(e.target.value)}else c(""),u(""),W(""),F("")}}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(m.a,{disabled:!K||""===p||P.kit.web3.utils.toBN(P.kit.web3.utils.toWei(Y.balance||"0")).eq(P.kit.web3.utils.toBN("0")),variant:"primary",onClick:function(){var e=te(),t=P.kit.web3.utils.toWei(p).toString();$({title:"Burn",celoTx:{from:q,to:Q.options.address,data:Q.methods.liquidityRemove(Y.tokens,t,e).encodeABI()},callback:function(){console.log("Burn 1")}})},children:"Burn"})})]}),Object(a.jsx)(S.a.Text,{className:"text-muted",hidden:""!==E||""!==L,children:q?"Balance : ".concat(Y.balance):""}),Object(a.jsx)(S.a.Text,{className:"text-danger",children:L}),Object(a.jsxs)(S.a.Text,{className:"text-success",hidden:""!==L,children:[E,"\xa0"]})]})]})})),ee=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState({icon:"",symbol:"",address:""}),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState({icon:"",symbol:"",address:""}),o=Object(f.a)(i,2),u=o[0],j=o[1],x=r.a.useState("status"),p=Object(f.a)(x,2),k=p[0],O=p[1],m=r.a.useState(null),v=Object(f.a)(m,2),S=v[0],y=v[1],N=r.a.useState({adr:""}),A=Object(f.a)(N,2),T=A[0],B=A[1],C=e.celo,E=e.network,W=e.isConnected,I=e.account,M=e.tokens,L=e.contract,F=e.hidden,P=e.getAllowance,G=e.setApprove,K=e.estimateFee,q=e.openTxModal;function D(e,t){return H.apply(this,arguments)}function H(){return(H=Object(b.a)(d.a.mark((function e(t,n){var a,s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=17;break}return e.next=3,S.methods.getPair([t.address,n.address]).call();case 3:return a=e.sent,e.next=6,C.kit.web3.eth.call({to:a.adr,data:C.contracts.erc20.methods.totalSupply().encodeABI()});case 6:if(s=e.sent,!I){e.next=14;break}return e.next=10,C.kit.web3.eth.call({to:a.adr,data:C.contracts.erc20.methods.balanceOf(I).encodeABI()});case 10:r=e.sent,B("0x"!==r?Object(l.a)(Object(l.a)({},a),{},{balance:C.kit.web3.utils.fromWei(C.kit.web3.eth.abi.decodeParameter("uint256",r).toString()),total:C.kit.web3.utils.fromWei(C.kit.web3.eth.abi.decodeParameter("uint256",s).toString())}):{adr:""}),e.next=15;break;case 14:B(Object(l.a)(Object(l.a)({},a),{},{total:C.kit.web3.utils.fromWei(C.kit.web3.eth.abi.decodeParameter("uint256",s).toString())}));case 15:e.next=18;break;case 17:B({adr:""});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){switch(e){case 0:u.address===t.address?(j(s),c(t)):(c(t),D(t,u));break;case 1:j(t),s.address===t.address?(c(u),j(t)):(j(t),D(s,t))}}return r.a.useEffect((function(){if(M[E].list.length>1){var e=L.address[E];if(!S&&e){var t=new C.kit.web3.eth.Contract(L.abi,e);y(t)}else S&&(c(M[E].list[0]),j(M[E].list[1]),D(M[E].list[0],M[E].list[1]))}}),[E,M,S,I]),Object(a.jsx)("div",{className:"DexfairLiquidity",hidden:F,children:Object(a.jsx)(U.a.Container,{defaultActiveKey:k,children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(g.a,{sm:2,children:Object(a.jsxs)(h.a,{variant:"pills",className:"flex-column",children:[Object(a.jsx)(h.a.Item,{children:Object(a.jsx)(h.a.Link,{eventKey:"status",className:"text-center",onSelect:function(e){return O(e)},children:"Status"})}),Object(a.jsx)(h.a.Item,{children:Object(a.jsx)(h.a.Link,{eventKey:"mint",className:"text-center",onSelect:function(e){return O(e)},disabled:!W,children:"Mint"})}),Object(a.jsx)(h.a.Item,{children:Object(a.jsx)(h.a.Link,{eventKey:"burn",className:"text-center",onSelect:function(e){return O(e)},disabled:!W,children:"Burn"})})]})}),Object(a.jsx)(g.a,{sm:10,children:Object(a.jsxs)(U.a.Content,{children:[Object(a.jsx)(U.a.Pane,{eventKey:"status",children:Object(a.jsx)(Q,{token0:s,token1:u,getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(S.options.address,t.address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:function(e,t){G(S.options.address,e.address,t)},changeToken:J,createPair:function(e){q({title:"Create Pair",celoTx:{from:I,to:S.options.address,data:S.methods.register([s.address,u.address]).encodeABI()},callback:e})},pair:T})}),Object(a.jsx)(U.a.Pane,{eventKey:"mint",children:Object(a.jsx)(Z,{token0:s,token1:u,getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(S.options.address,t.address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:function(e,t){G(S.options.address,e.address,t)},changeToken:J,pair:T,exchange:S,estimateFee:K,openTxModal:q})}),Object(a.jsx)(U.a.Pane,{eventKey:"burn",children:Object(a.jsx)($,{token0:s,token1:u,getAllowance:function(){var e=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(S.options.address,t.address);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setApprove:function(e,t){G(S.options.address,e.address,t)},changeToken:J,pair:T,exchange:S,estimateFee:K,openTxModal:q})})]})})]})})})})),te=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState("transfer"),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState(""),o=Object(f.a)(i,2),l=o[0],u=o[1],j=r.a.useState(!1),x=Object(f.a)(j,2),p=x[0],h=x[1],m=r.a.useState({title:""}),w=Object(f.a)(m,2),g=w[0],v=w[1],S=e.celo,N=e.network,A=e.account,T=e.contract,B=e.updataMainBalance;function C(e,t){return E.apply(this,arguments)}function E(){return(E=Object(b.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S.kit.web3.utils.isAddress(A)||!t){e.next=5;break}return e.next=3,S.kit.web3.eth.call({to:n,data:S.contracts.erc20.methods.allowance(A,t).encodeABI()});case 3:return a=e.sent,e.abrupt("return",a);case 5:return e.abrupt("return","0");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,n){if(S.kit.web3.utils.isAddress(A)&&e){var a=S.kit.web3.utils.hexToNumberString("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");M({title:"Approve",celoTx:{from:A,to:t,data:S.contracts.erc20.methods.approve(e,a).encodeABI()},callback:n})}}function I(e){return S.kit.web3.utils.fromWei(S.kit.web3.utils.toBN(Math.round(e*S.kit.connection.defaultGasInflationFactor)).mul(S.kit.web3.utils.toBN(l)))}function M(e){v(e),h(!0)}return r.a.useEffect((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.kit.web3.eth.getGasPrice();case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),c("transfer")}),[N]),Object(a.jsxs)(k.a,{className:"my-5",children:[Object(a.jsxs)(O.a,{children:[Object(a.jsxs)(O.a.Header,{children:[Object(a.jsx)("div",{hidden:!!T.address[N],children:Object(a.jsxs)(q.a,{activeKey:s,onSelect:function(e){return c(e)},children:[Object(a.jsx)(U.a,{eventKey:"transfer",title:"Transfer"}),Object(a.jsx)(U.a,{eventKey:"exchange",title:"Exchange"})]})}),Object(a.jsx)("div",{hidden:!T.address[N],children:Object(a.jsxs)(q.a,{activeKey:s,onSelect:function(e){return c(e)},children:[Object(a.jsx)(U.a,{eventKey:"transfer",title:"Transfer"}),Object(a.jsx)(U.a,{eventKey:"exchange",title:"Exchange"}),Object(a.jsx)(U.a,{eventKey:"dexfair",title:"Dexfair"}),Object(a.jsx)(U.a,{eventKey:"liquidity",title:"Liquidity"})]})})]}),Object(a.jsxs)(O.a.Body,{children:[Object(a.jsx)(y.a,{in:"transfer"===s,timeout:400,classNames:"fade",unmountOnExit:!0,children:Object(a.jsx)(z,{hidden:"transfer"!==s,estimateFee:I,openTxModal:M})}),Object(a.jsx)(y.a,{in:"exchange"===s,timeout:400,classNames:"fade",unmountOnExit:!0,children:Object(a.jsx)(X,{hidden:"exchange"!==s,getAllowance:C,setApprove:W,estimateFee:I,openTxModal:M})}),Object(a.jsx)(y.a,{in:"dexfair"===s,timeout:400,classNames:"fade",unmountOnExit:!0,children:Object(a.jsx)(Y,{hidden:"dexfair"!==s||!T.address[N],getAllowance:C,setApprove:W,estimateFee:I,openTxModal:M})}),Object(a.jsx)(y.a,{in:"liquidity"===s,timeout:400,classNames:"fade",unmountOnExit:!0,children:Object(a.jsx)(ee,{hidden:"liquidity"!==s||!T.address[N],getAllowance:C,setApprove:W,estimateFee:I,openTxModal:M})})]})]}),Object(a.jsx)(D.a,{celo:S,show:p,txData:g,updataMainBalance:B,onHide:function(){h(!1),v({title:""})}})]})})),ne=n(188),ae=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState(""),n=Object(f.a)(t,2),s=n[0],c=(n[1],r.a.useState("")),i=Object(f.a)(c,2),o=i[0],l=i[1],u=r.a.useState(""),d=Object(f.a)(u,2),b=d[0],j=d[1],x=e.settings,p=e.show,k=e.onHide,h=e.StoreActions;return r.a.useEffect((function(){l(x.slippage.value),j(x.deadline.value)}),[p]),Object(a.jsx)("div",{className:"ModalSettings",children:Object(a.jsxs)(ne.a,{show:p,onHide:k,"aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",centered:!0,children:[Object(a.jsx)(ne.a.Header,{closeButton:!0,className:s,children:Object(a.jsx)(ne.a.Title,{id:"contained-modal-title-vcenter",children:"Settings"})}),Object(a.jsxs)(ne.a.Body,{children:[Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:x.slippage.name}),Object(a.jsxs)(v.a,{children:[Object(a.jsx)(S.a.Control,{type:"string",placeholder:"",value:o,isInvalid:parseInt(o,10)<50||parseInt(o,10)>100,onChange:function(e){var t=parseInt(e.target.value,10);l(e.target.value),t>=50&&t<=100&&h.dexfairSetting("slippage",e.target.value)}}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(v.a.Text,{children:x.slippage.unit})})]}),Object(a.jsx)(S.a.Text,{className:"text-muted",children:x.slippage.desc})]}),Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:x.deadline.name}),Object(a.jsxs)(v.a,{children:[Object(a.jsx)(S.a.Control,{type:"string",placeholder:"",value:b,isInvalid:parseInt(b,10)<5||parseInt(b,10)>60,onChange:function(e){var t=parseInt(e.target.value,10);j(e.target.value),t>=50&&t<=100&&h.dexfairSetting("deadline",e.target.value)}}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(v.a.Text,{children:x.deadline.unit})})]}),Object(a.jsx)(S.a.Text,{className:"text-muted",children:x.deadline.desc})]})]}),Object(a.jsx)(ne.a.Footer,{children:Object(a.jsx)(m.a,{onClick:k,children:"Close"})})]})})})),se=function(e){var t=r.a.useState(""),n=Object(f.a)(t,2),s=n[0],c=(n[1],r.a.useState("")),i=Object(f.a)(c,2),o=i[0],l=i[1],u=r.a.useState(!1),j=Object(f.a)(u,2),x=j[0],p=j[1],k=r.a.useState(!1),h=Object(f.a)(k,2),O=h[0],w=h[1],g=r.a.useState({icon:"",address:"",symbol:"",name:""}),y=Object(f.a)(g,2),N=y[0],A=y[1],T=e.celo,B=e.network,C=e.tokens,E=e.insertToken,W=e.show,I=e.onHide;return r.a.useEffect((function(){w(!1),l(""),A({icon:"",address:"",symbol:"",name:""})}),[W]),Object(a.jsx)("div",{className:"ModalAddToken",children:Object(a.jsxs)(ne.a,{show:W,onHide:I,"aria-labelledby":"contained-modal-title-vcenter",backdrop:"static",centered:!0,children:[Object(a.jsx)(ne.a.Header,{closeButton:!0,className:s,children:Object(a.jsx)(ne.a.Title,{id:"contained-modal-title-vcenter",children:"Add Token"})}),Object(a.jsx)(ne.a.Body,{children:Object(a.jsxs)(S.a,{children:[Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"Symbol"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a.Control,{readOnly:!0,type:"string",placeholder:"",value:N.symbol})})]}),Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"Name"}),Object(a.jsx)(v.a,{children:Object(a.jsx)(S.a.Control,{readOnly:!0,type:"string",placeholder:"",value:N.name})})]}),Object(a.jsxs)(S.a.Group,{children:[Object(a.jsx)(S.a.Text,{children:"Address"}),Object(a.jsxs)(v.a,{children:[Object(a.jsx)(S.a.Control,{type:"string",placeholder:"0x",value:o,onChange:function(e){l(e.target.value)}}),Object(a.jsx)(v.a.Append,{children:Object(a.jsx)(m.a,{hidden:!T.kit.web3.utils.isAddress(o),disabled:x,onClick:Object(b.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),w(!1),e.next=4,T.kit.web3.eth.call({to:o,data:T.contracts.erc20.methods.symbol().encodeABI()});case 4:if("0x"===(t=e.sent)){e.next=10;break}return e.next=8,T.kit.web3.eth.call({to:o,data:T.contracts.erc20.methods.name().encodeABI()});case 8:"0x"!==(n=e.sent)&&(w(void 0===C[B].balance[N.address]),A({icon:"",address:o,symbol:"".concat(T.kit.web3.eth.abi.decodeParameter("string",t))||o,name:"".concat(T.kit.web3.eth.abi.decodeParameter("string",n))}));case 10:p(!1);case 11:case"end":return e.stop()}}),e)}))),children:Object(a.jsx)("i",{className:"fas fa-search-plus"})})})]})]})]})}),Object(a.jsx)(ne.a.Footer,{children:Object(a.jsx)(m.a,{onClick:function(){O&&void 0===C[B].balance[N.address]&&E(N),I()},children:O?"Add & Close":"Close"})})]})})},re={usb:{icon:"./ledger-512.png",name:"Ledger USB"},ble:{icon:"./ledger-512.png",name:"Ledger BLE"},celo:{icon:"./celo-512.png",name:"Celo"},metamask:{icon:"./metamask-512.png",name:"MetaMask"}},ce=Object(o.b)((function(e){var t=e.dexfairStore;return Object(l.a)({},t)}),(function(e){return{StoreActions:Object(A.a)(G,e)}}))((function(e){var t=r.a.useState(!1),n=Object(f.a)(t,2),s=n[0],c=n[1],i=r.a.useState({}),o=Object(f.a)(i,2),l=o[0],u=o[1],A=r.a.useState({}),T=Object(f.a)(A,2),B=T[0],C=T[1],E=r.a.useState("...loading"),W=Object(f.a)(E,2),I=W[0],M=W[1],L=r.a.useState({celo:"",cusd:""}),F=Object(f.a)(L,2),P=F[0],G=F[1],K=r.a.useState(!1),q=Object(f.a)(K,2),U=q[0],D=q[1],H=r.a.useState(!1),J=Object(f.a)(H,2),R=J[0],_=J[1],z=e.celo,V=e.network,X=e.isConnected,Y=e.account,Q=e.contract,Z=e.tokens,$=e.StoreActions;function ee(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=!1,e.t0=t,e.next="metamask"===e.t0?5:"usb"===e.t0?9:"ble"===e.t0?13:17;break;case 5:return e.next=7,z.connectMetaMask(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(re.metamask.icon),$.accountUpdate(t[0]),e.next=4,ue(t[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:return n=e.sent,e.abrupt("break",23);case 9:return e.next=11,z.connectLedgerUSB(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(re.usb.icon),$.accountUpdate(t[0]),e.next=4,ue(t[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:return n=e.sent,e.abrupt("break",23);case 13:return e.next=15,z.connectLedgerBLE(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(re.ble.icon),$.accountUpdate(t[0]),e.next=4,ue(t[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:return n=e.sent,e.abrupt("break",23);case 17:return z.disconnect(),$.networkConnect(!1),M(""),$.accountUpdate(""),G({celo:"",cusd:""}),e.abrupt("break",23);case 23:$.networkConnect(n),e.next=30;break;case 26:e.prev=26,e.t1=e.catch(0),console.log(new Error(e.t1)),$.networkConnect(!1);case 30:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function ce(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===V){e.next=6;break}return n=N.NETWORKS[t],$.networkUpdate(t),G({celo:"...loading",cusd:"...loading"}),e.next=6,z.changeNetwork(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(b.a)(d.a.mark((function e(t,n){var a,s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Z[n]||0!==Z[n].list.length){e.next=12;break}return e.next=3,z.kit.contracts.getGoldToken();case 3:return a=e.sent,e.next=6,z.kit.contracts.getStableToken();case 6:s=e.sent,r=Q.address[n],$.tokenInsert(n,{icon:"/dexfair/celo.svg",symbol:"Celo",address:a.address}),$.tokenInsert(n,{icon:"/dexfair/cusd.svg",symbol:"cUsd",address:s.address}),r&&$.tokenInsert(n,{icon:"/dexfair/dexfair.png",symbol:"XGP",address:r}),t[n].forEach((function(e){$.tokenInsert(n,e)}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return de.apply(this,arguments)}function de(){return(de=Object(b.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!z.kit.web3.utils.isAddress(t)){e.next=7;break}return G({celo:"...loading",cusd:"...loading"}),e.next=4,z.kit.getTotalBalance(t);case 4:n=e.sent,Z[V]&&Z[V].list.length>1&&($.tokenUpdate(V,Z[V].list[0].address,n.CELO.toString()),$.tokenUpdate(V,Z[V].list[1].address,n.cUSD.toString())),G({celo:z.kit.web3.utils.fromWei(n.CELO.toString()),cusd:z.kit.web3.utils.fromWei(n.cUSD.toString())});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.useEffect((function(){function e(){return(e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=7;break}return e.next=3,oe(l,V);case 3:return e.next=5,ue(Y);case 5:e.next=13;break;case 7:return e.t0=C,e.next=10,z.getSupport();case 10:e.t1=e.sent,(0,e.t0)(e.t1),fetch("/dexfair/config.json").then((function(e){return e.json()})).then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$.dexfairUpdate(t),fetch("/dexfair/tokens.json").then((function(e){return e.json()})).then(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t,V);case 2:c(!0),u(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[V]),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(p.a,{bg:"light",expand:"lg",children:Object(a.jsxs)(k.a,{children:[Object(a.jsx)(p.a.Brand,{href:"/",children:Object(a.jsx)(x.a,{src:"./dexfair_00.png",style:{height:"32px"},fluid:!0})}),Object(a.jsx)(p.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(a.jsxs)(p.a.Collapse,{id:"responsive-navbar-nav",children:[Object(a.jsx)(h.a,{className:"mr-auto"}),Object(a.jsx)(h.a,{children:function(){var e=Object.keys(N.NETWORKS).map((function(e,t){return Object(a.jsx)(j.a.Item,{value:e,onClick:function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t.target.text);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:e},"network_".concat(t.toString()))})),t=Object.keys(B).map((function(e,t){return Object(a.jsxs)(j.a.Item,{hidden:!B[e]||X,onClick:Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee(e);case 2:case"end":return t.stop()}}),t)}))),children:[Object(a.jsx)(x.a,{src:re[e].icon,style:{height:"18px"},fluid:!0}),"\xa0",Object(a.jsx)("span",{className:"align-middle",children:re[e].name})]},"connect_".concat(t.toString()))}));return Object(a.jsxs)(j.a,{title:V,id:"collasible-nav-dropdown",children:[e,Object(a.jsx)(j.a.Divider,{}),t,Object(a.jsx)(j.a.Item,{hidden:!X,onClick:function(){_(!0)},children:Object(a.jsxs)("span",{className:"align-middle",children:[Object(a.jsx)("i",{className:"fas fa-plus-square mr-2"}),"Add Token"]})}),Object(a.jsx)(j.a.Item,{hidden:!X,onClick:function(){D(!0)},children:Object(a.jsxs)("span",{className:"align-middle",children:[Object(a.jsx)("i",{className:"fas fa-cog mr-2"}),"Settings"]})}),Object(a.jsx)(j.a.Divider,{hidden:!X}),Object(a.jsx)(j.a.Item,{hidden:!X,onClick:function(){ee("")},children:Object(a.jsxs)("span",{className:"align-middle",children:[Object(a.jsx)("i",{className:"fas fa-sign-out-alt mr-2"}),"Logout"]})})]})}()})]})]})}),Object(a.jsx)(y.a,{in:X,timeout:300,classNames:"zoom",unmountOnExit:!0,children:Object(a.jsx)(k.a,{className:"my-5",children:Object(a.jsxs)(O.a,{children:[Object(a.jsxs)(O.a.Header,{children:[Object(a.jsx)(x.a,{src:I,style:{height:"24px"},fluid:!0}),"\xa0",Object(a.jsx)("span",{className:"align-middle",children:Y}),Object(a.jsx)("span",{className:"align-middle",children:Object(a.jsx)(m.a,{variant:"link",size:"sm",target:"_blank",href:"".concat(N.NETWORKS[V].blockscout,"/address/").concat(Y),children:Object(a.jsx)("i",{className:"fas fa-external-link-alt"})})})]}),Object(a.jsx)(O.a.Body,{children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(g.a,{children:Object(a.jsxs)(v.a,{children:[Object(a.jsx)(v.a.Prepend,{children:Object(a.jsx)(v.a.Text,{children:Object(a.jsx)(x.a,{src:"./icon-celo-CELO-dark-f.svg",style:{height:"24px"}})})}),Object(a.jsx)(S.a.Control,{placeholder:"...loading",value:P.celo,readOnly:!0})]})}),Object(a.jsx)(g.a,{children:Object(a.jsxs)(v.a,{children:[Object(a.jsx)(v.a.Prepend,{children:Object(a.jsx)(v.a.Text,{children:Object(a.jsx)(x.a,{sizes:"sm",src:"./icon-celo-dollar-black-f.svg",style:{height:"24px"}})})}),Object(a.jsx)(S.a.Control,{placeholder:"...loading",value:P.cusd,readOnly:!0})]})})]})})]})})}),Object(a.jsx)(te,{updataMainBalance:ue}),Object(a.jsx)(ae,{show:U,onHide:function(){D(!1)}}),Object(a.jsx)(se,{celo:z,network:V,tokens:Z,insertToken:function(e){return $.tokenInsert(V,e)},show:R,onHide:function(){_(!1)}})]})})),ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,973)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))},oe=Object(A.b)({dexfairStore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return{celo:e.celo,network:t.meta.network,isConnected:e.isConnected,account:e.account,contract:e.contract,settings:e.settings,tokens:e.tokens};case E:return{celo:e.celo,network:e.network,isConnected:t.meta.connection,account:e.account,contract:e.contract,settings:e.settings,tokens:e.tokens};case W:return{celo:e.celo,network:e.network,isConnected:e.isConnected,account:t.meta.address,contract:e.contract,settings:e.settings,tokens:e.tokens};case I:return{celo:e.celo,network:e.network,isConnected:e.isConnected,account:e.account,contract:t.payload,settings:e.settings,tokens:e.tokens};case M:return{celo:e.celo,network:e.network,isConnected:e.isConnected,account:e.account,contract:e.contract,settings:Object(l.a)(Object(l.a)({},e.settings),{},Object(B.a)({},t.meta.key,Object(l.a)(Object(l.a)({},e.settings[t.meta.key]),{},{value:t.meta.value}))),tokens:e.tokens};case L:return{celo:e.celo,network:e.network,isConnected:e.isConnected,account:e.account,contract:e.contract,settings:e.settings,tokens:Object(l.a)(Object(l.a)({},e.tokens),{},Object(B.a)({},t.meta.network,{list:[].concat(Object(T.a)(e.tokens[e.network].list),[t.meta.token]),balance:Object(l.a)(Object(l.a)({},e.tokens[t.meta.network].balance),{},Object(B.a)({},t.meta.token.address,""))}))};case P:return{celo:e.celo,network:e.network,isConnected:e.isConnected,account:e.account,contract:e.contract,settings:e.settings,tokens:Object(l.a)(Object(l.a)({},e.tokens),{},Object(B.a)({},t.meta.network,{list:e.tokens[t.meta.network].list,balance:Object(l.a)(Object(l.a)({},e.tokens[t.meta.network].balance),{},Object(B.a)({},t.meta.address,t.meta.balance))}))};case F:return{celo:e.celo,network:e.network,isConnected:e.isConnected,account:e.account,contract:e.contract,settings:e.settings,tokens:Object(l.a)(Object(l.a)({},e.tokens),{},Object(B.a)({},t.meta.network,{list:e.tokens[t.meta.network].list.filter((function(e){return e.address!==t.meta.address})),balance:Object(l.a)(Object(l.a)({},e.tokens[t.meta.network].balance),{},Object(B.a)({},t.meta.address,void 0))}))};default:return e}}});var le=Object(A.c)(oe);i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(o.a,{store:le,children:Object(a.jsx)(ce,{})})}),document.getElementById("root")),ie()}},[[948,1,2]]]);
//# sourceMappingURL=main.2b07def1.chunk.js.map